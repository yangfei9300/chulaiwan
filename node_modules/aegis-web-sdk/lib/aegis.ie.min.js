/**
 *  =================================================================
 * aegis-web-sdk@1.36.6 (c) 2023 TencentCloud Real User Monitoring.
 * Author pumpkincai.
 * Last Release Time Tue Jan 03 2023 12:54:18 GMT+0800 (中国标准时间).
 * Released under the MIT License.
 * Thanks for supporting RUM & Aegis!
 * =================================================================
 **/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Aegis=t()}(this,function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){throw t!==undefined&&null!==t||n.path,new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},n.exports),n.exports}var o,i,D,c,U,v=(D=function(e){return e&&e.Math==Math&&e})("object"==typeof globalThis&&globalThis)||D("object"==typeof window&&window)||D("object"==typeof self&&self)||D("object"==typeof e&&e)||function(){return this}()||Function("return this")(),d=!(c=function(e){try{return!!e()}catch(t){return!0}})(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),F=!c(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),M=Function.prototype.call,m=F?M.bind(M):function(){return M.apply(M,arguments)},e={}.propertyIsEnumerable,H={f:(U=Object.getOwnPropertyDescriptor)&&!e.call({1:2},1)?function(e){e=U(this,e);return!!e&&e.enumerable}:e},q=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},e=Function.prototype,B=e.bind,W=e.call,G=F&&B.bind(W,W),s=F?function(e){return e&&G(e)}:function(e){return e&&function(){return W.apply(e,arguments)}},$=s({}.toString),V=s("".slice),X=function(e){return V($(e),8,-1)},J=Object,K=s("".split),z=c(function(){return!J("z").propertyIsEnumerable(0)})?function(e){return"String"==X(e)?K(e,""):J(e)}:J,Y=function(e){return null===e||e===undefined},Q=TypeError,Z=function(e){if(Y(e))throw Q("Can't call method on "+e);return e},ee=function(e){return z(Z(e))},e="object"==typeof document&&document.all,B={all:e,IS_HTMLDDA:void 0===e&&e!==undefined},te=B.all,O=B.IS_HTMLDDA?function(e){return"function"==typeof e||e===te}:function(e){return"function"==typeof e},ne=B.all,l=B.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:O(e)||e===ne}:function(e){return"object"==typeof e?null!==e:O(e)},re=function(e,t){return arguments.length<2?(n=v[e],O(n)?n:undefined):v[e]&&v[e][t];var n},oe=s({}.isPrototypeOf),e=re("navigator","userAgent")||"",B=v.process,n=v.Deno,B=B&&B.versions||n&&n.version,n=B&&B.v8,ie=i=!(i=n?0<(o=n.split("."))[0]&&o[0]<4?1:+(o[0]+o[1]):i)&&e&&(!(o=e.match(/Edge\/(\d+)/))||74<=o[1])&&(o=e.match(/Chrome\/(\d+)/))?+o[1]:i,ue=!!Object.getOwnPropertySymbols&&!c(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ie&&ie<41}),ae=ue&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ce=Object,se=ae?function(e){return"symbol"==typeof e}:function(e){var t=re("Symbol");return O(t)&&oe(t.prototype,ce(e))},fe=String,le=function(e){try{return fe(e)}catch(t){return"Object"}},de=TypeError,pe=function(e){if(O(e))return e;throw de(le(e)+" is not a function")},he=function(e,t){t=e[t];return Y(t)?undefined:pe(t)},ge=TypeError,ye=Object.defineProperty,ve=function(e,t){try{ye(v,e,{value:t,configurable:!0,writable:!0})}catch(o){v[e]=t}return t},me=v["__core-js_shared__"]||ve("__core-js_shared__",{}),B=t(function(e){(e.exports=function(e,t){return me[e]||(me[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.25.2",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.2/LICENSE",source:"https://github.com/zloirock/core-js"})}),be=Object,we=function(e){return be(Z(e))},Ee=s({}.hasOwnProperty),b=Object.hasOwn||function(e,t){return Ee(we(e),t)},Oe=0,Re=Math.random(),Se=s(1..toString),xe=function(e){return"Symbol("+(e===undefined?"":e)+")_"+Se(++Oe+Re,36)},Te=B("wks"),Pe=v.Symbol,Ie=Pe&&Pe["for"],Le=ae?Pe:Pe&&Pe.withoutSetter||xe,f=function(e){var t;return b(Te,e)&&(ue||"string"==typeof Te[e])||(t="Symbol."+e,ue&&b(Pe,e)?Te[e]=Pe[e]:Te[e]=(ae&&Ie?Ie:Le)(t)),Te[e]},Ce=TypeError,je=f("toPrimitive"),Ae=function(e,t){if(!l(e)||se(e))return e;var n,r,o=he(e,je);if(o){if(t===undefined&&(t="default"),o=m(o,e,t),!l(o)||se(o))return o;throw Ce("Can't convert object to primitive value")}t===undefined&&(t="number");o=e,e=t;if("string"===e&&O(n=o.toString)&&!l(r=m(n,o)))return r;if(O(n=o.valueOf)&&!l(r=m(n,o)))return r;if("string"!==e&&O(n=o.toString)&&!l(r=m(n,o)))return r;throw ge("Can't convert object to primitive value")},ke=function(e){e=Ae(e,"string");return se(e)?e:e+""},Ne=v.document,_e=l(Ne)&&l(Ne.createElement),De=function(e){return _e?Ne.createElement(e):{}},Ue=!d&&!c(function(){return 7!=Object.defineProperty(De("div"),"a",{get:function(){return 7}}).a}),Fe=Object.getOwnPropertyDescriptor,Me={f:d?Fe:function(e,t){if(e=ee(e),t=ke(t),Ue)try{return Fe(e,t)}catch(o){}if(b(e,t))return q(!m(H.f,e,t),e[t])}},n=d&&c(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),He=String,qe=TypeError,R=function(e){if(l(e))return e;throw qe(He(e)+" is not an object")},Be=TypeError,We=Object.defineProperty,Ge=Object.getOwnPropertyDescriptor,$e={f:d?n?function(e,t,n){var r;return R(e),t=ke(t),R(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable&&(r=Ge(e,t))&&r.writable&&(e[t]=n.value,n={configurable:("configurable"in n?n:r).configurable,enumerable:("enumerable"in n?n:r).enumerable,writable:!1}),We(e,t,n)}:We:function(e,t,n){if(R(e),t=ke(t),R(n),Ue)try{return We(e,t,n)}catch(i){}if("get"in n||"set"in n)throw Be("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Ve=d?function(e,t,n){return $e.f(e,t,q(1,n))}:function(e,t,n){return e[t]=n,e},r=Function.prototype,u=d&&Object.getOwnPropertyDescriptor,a=b(r,"name"),Xe={EXISTS:a,PROPER:a&&"something"===function(){}.name,CONFIGURABLE:a&&(!d||u(r,"name").configurable)},Je=s(Function.toString);O(me.inspectSource)||(me.inspectSource=function(e){return Je(e)});var Ke,ze,Ye,Qe,Ze,et,tt,nt,rt=me.inspectSource,a=v.WeakMap,r=O(a)&&/native code/.test(String(a)),ot=B("keys"),u=function(e){return ot[e]||(ot[e]=xe(e))},it={},ut=v.TypeError,a=v.WeakMap,at=(tt=r||me.state?(Ke=me.state||(me.state=new a),ze=s(Ke.get),Ye=s(Ke.has),Qe=s(Ke.set),Ze=function(e,t){if(Ye(Ke,e))throw ut("Object already initialized");return t.facade=e,Qe(Ke,e,t),t},et=function(e){return ze(Ke,e)||{}},function(e){return Ye(Ke,e)}):(nt=u("state"),it[nt]=!0,Ze=function(e,t){if(b(e,nt))throw ut("Object already initialized");return t.facade=e,Ve(e,nt,t),t},et=function(e){return b(e,nt)?e[nt]:{}},function(e){return b(e,nt)}),{set:Ze,get:et,has:tt,enforce:function(e){return tt(e)?et(e):Ze(e,{})},getterFor:function(t){return function(e){if(l(e)&&(e=et(e)).type===t)return e;throw ut("Incompatible receiver, "+t+" required")}}}),ct=t(function(e){var r=Xe.CONFIGURABLE,o=at.enforce,t=at.get,i=Object.defineProperty,u=d&&!c(function(){return 8!==i(function(){},"length",{value:8}).length}),a=String(String).split("String"),e=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!b(e,"name")||r&&e.name!==t)&&(d?i(e,"name",{value:t,configurable:!0}):e.name=t),u&&n&&b(n,"arity")&&e.length!==n.arity&&i(e,"length",{value:n.arity});try{n&&b(n,"constructor")&&n.constructor?d&&i(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=undefined)}catch(m){}n=o(e);return b(n,"source")||(n.source=a.join("string"==typeof t?t:"")),e};Function.prototype.toString=e(function(){return O(this)&&t(this).source||rt(this)},"toString")}),st=function(e,t,n,r){var o=(r=r||{}).enumerable,i=r.name!==undefined?r.name:t;if(O(n)&&ct(n,i,r),r.global)o?e[t]=n:ve(t,n);else{try{r.unsafe?e[t]&&(o=!0):delete e[t]}catch(c){}o?e[t]=n:$e.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},ft=Math.ceil,lt=Math.floor,dt=Math.trunc||function(e){e=+e;return(0<e?lt:ft)(e)},pt=function(e){e=+e;return e!=e||0==e?0:dt(e)},ht=Math.max,gt=Math.min,yt=function(e,t){e=pt(e);return e<0?ht(e+t,0):gt(e,t)},vt=Math.min,mt=function(e){return 0<e?vt(pt(e),9007199254740991):0},bt=function(e){return mt(e.length)},r=function(a){return function(e,t,n){var r,o=ee(e),i=bt(o),u=yt(n,i);if(a&&t!=t){for(;u<i;)if((r=o[u++])!=r)return!0}else for(;u<i;u++)if((a||u in o)&&o[u]===t)return a||u||0;return!a&&-1}},a={includes:r(!0),indexOf:r(!1)},wt=a.indexOf,Et=s([].push),Ot=function(e,t){var n,r=ee(e),o=0,i=[];for(n in r)!b(it,n)&&b(r,n)&&Et(i,n);for(;t.length>o;)!b(r,n=t[o++])||~wt(i,n)||Et(i,n);return i},Rt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],St=Rt.concat("length","prototype"),xt={f:Object.getOwnPropertyNames||function(e){return Ot(e,St)}},Tt={f:Object.getOwnPropertySymbols},Pt=s([].concat),It=re("Reflect","ownKeys")||function(e){var t=xt.f(R(e)),n=Tt.f;return n?Pt(t,n(e)):t},Lt=/#|\.prototype\./,r=function(e,t){e=jt[Ct(e)];return e==kt||e!=At&&(O(t)?c(t):!!t)},Ct=r.normalize=function(e){return String(e).replace(Lt,".").toLowerCase()},jt=r.data={},At=r.NATIVE="N",kt=r.POLYFILL="P",Nt=r,_t=Me.f,g=function(e,t){var n,r,o,i,u=e.target,a=e.global,c=e.stat;if(n=a?v:c?v[u]||ve(u,{}):(v[u]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(i=_t(n,r))&&i.value:n[r],!Nt(a?r:u+(c?".":"#")+r,e.forced)&&i!==undefined){if(typeof o==typeof i)continue;for(var s=o,f=i,l=y=g=h=p=d=void 0,d=It(f),p=$e.f,h=Me.f,g=0;g<d.length;g++){var y=d[g];b(s,y)||l&&b(l,y)||p(s,y,h(f,y))}}(e.sham||i&&i.sham)&&Ve(o,"sham",!0),st(n,r,o,e)}},Dt=s(s.bind),Ut=function(e,t){return pe(e),t===undefined?e:F?Dt(e,t):function(){return e.apply(t,arguments)}},Ft=Array.isArray||function(e){return"Array"==X(e)},r={},r=(r[f("toStringTag")]="z","[object z]"===String(r)),Mt=f("toStringTag"),Ht=Object,qt="Arguments"==X(function(){return arguments}()),Bt=r?X:function(e){var n,t;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(e=Ht(e),Mt))?n:qt?X(e):"Object"==(t=X(e))&&O(e.callee)?"Arguments":t},Wt=function(){},Gt=[],$t=re("Reflect","construct"),Vt=/^\s*(?:class|function)\b/,Xt=s(Vt.exec),Jt=!Vt.exec(Wt),Kt=function(e){if(!O(e))return!1;try{return $t(Wt,Gt,e),!0}catch(t){return!1}},p=function(e){if(!O(e))return!1;switch(Bt(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Jt||!!Xt(Vt,rt(e))}catch(t){return!0}};p.sham=!0;var zt,Yt=!$t||c(function(){var e;return Kt(Kt.call)||!Kt(Object)||!Kt(function(){e=!0})||e})?p:Kt,Qt=f("species"),Zt=Array,en=function(e,t){return Ft(e=e)&&(n=e.constructor,(Yt(n)&&(n===Zt||Ft(n.prototype))||l(n)&&null===(n=n[Qt]))&&(n=undefined)),new(n===undefined?Zt:n)(0===t?0:t);var n},tn=s([].push),p=function(d){var p=1==d,h=2==d,g=3==d,y=4==d,v=6==d,m=7==d,b=5==d||v;return function(e,t,n,r){for(var o,i,u=we(e),a=z(u),c=Ut(t,n),s=bt(a),f=0,t=r||en,l=p?t(e,s):h||m?t(e,0):undefined;f<s;f++)if((b||f in a)&&(i=c(o=a[f],f,u),d))if(p)l[f]=i;else if(i)switch(d){case 3:return!0;case 5:return o;case 6:return f;case 2:tn(l,o)}else switch(d){case 4:return!1;case 7:tn(l,o)}return v?-1:g||y?y:l}},p={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6),filterReject:p(7)},nn=Object.keys||function(e){return Ot(e,Rt)},rn={f:d&&!n?Object.defineProperties:function(e,t){R(e);for(var n,r=ee(t),o=nn(t),i=o.length,u=0;u<i;)$e.f(e,n=o[u++],r[n]);return e}},on=re("document","documentElement"),un=u("IE_PROTO"),an=function(){},cn=function(e){return"<script>"+e+"<\/script>"},sn=function(e){e.write(cn("")),e.close();var t=e.parentWindow.Object;return e=null,t},fn=function(){try{zt=new ActiveXObject("htmlfile")}catch(i){}var e;fn="undefined"==typeof document||document.domain&&zt?sn(zt):((e=De("iframe")).style.display="none",on.appendChild(e),e.src=String("javascript:"),(e=e.contentWindow.document).open(),e.write(cn("document.F=Object")),e.close(),e.F);for(var t=Rt.length;t--;)delete fn.prototype[Rt[t]];return fn()},ln=(it[un]=!0,Object.create||function(e,t){var n;return null!==e?(an.prototype=R(e),n=new an,an.prototype=null,n[un]=e):n=fn(),t===undefined?n:rn.f(n,t)}),n=$e.f,dn=f("unscopables"),pn=Array.prototype,n=(pn[dn]==undefined&&n(pn,dn,{configurable:!0,value:ln(null)}),function(e){pn[dn][e]=!0}),hn=p.find,gn=!0,h=("find"in[]&&Array(1).find(function(){gn=!1}),g({target:"Array",proto:!0,forced:gn},{find:function(e){return hn(this,e,1<arguments.length?arguments[1]:undefined)}}),n("find"),r?{}.toString:function(){return"[object "+Bt(this)+"]"}),r=(r||st(Object.prototype,"toString",h,{unsafe:!0}),$e.f);g({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!d},{defineProperty:r});var yn=String,S=function(e){if("Symbol"===Bt(e))throw TypeError("Cannot convert a Symbol value to a string");return yn(e)},vn=f("match"),mn=TypeError,bn=f("match"),h=Me.f,wn=s("".startsWith),En=s("".slice),On=Math.min,r=function(e){var t=/./;try{"/./"[e](t)}catch(o){try{return t[bn]=!1,"/./"[e](t)}catch(i){}}return!1}("startsWith"),h=!(r||(!(h=h(String.prototype,"startsWith"))||h.writable));g({target:"String",proto:!0,forced:!h&&!r},{startsWith:function(e){var t=S(Z(this)),n=e;if(l(n=n)&&((r=n[vn])!==undefined?r:"RegExp"==X(n)))throw mn("The method doesn't accept regular expressions");var r=mt(On(1<arguments.length?arguments[1]:undefined,t.length)),n=S(e);return wn?wn(t,n,r):En(t,r,r+n.length)===n}});var Rn,Sn={},h=!c(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),xn=u("IE_PROTO"),Tn=Object,Pn=Tn.prototype,In=h?Tn.getPrototypeOf:function(e){var t,e=we(e);return b(e,xn)?e[xn]:(t=e.constructor,O(t)&&e instanceof t?t.prototype:e instanceof Tn?Pn:null)},Ln=f("iterator"),r=!1,u=([].keys&&("next"in(u=[].keys())?(u=In(In(u)))!==Object.prototype&&(Rn=u):r=!0),l(Rn)&&!c(function(){var e={};return Rn[Ln].call(e)!==e})||(Rn={}),O(Rn[Ln])||st(Rn,Ln,function(){return this}),{IteratorPrototype:Rn,BUGGY_SAFARI_ITERATORS:r}),Cn=$e.f,jn=f("toStringTag"),An=function(e,t,n){(e=e&&!n?e.prototype:e)&&!b(e,jn)&&Cn(e,jn,{configurable:!0,value:t})},kn=u.IteratorPrototype,Nn=function(){return this},_n=String,Dn=TypeError,Un=Object.setPrototypeOf||("__proto__"in{}?function(){var r,o=!1,e={};try{(r=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),o=e instanceof Array}catch(i){}return function(e,t){R(e);var n=t;if("object"==typeof n||O(n))return o?r(e,t):e.__proto__=t,e;throw Dn("Can't set "+_n(n)+" as a prototype")}}():undefined),Fn=Xe.PROPER,Mn=Xe.CONFIGURABLE,Hn=u.IteratorPrototype,qn=u.BUGGY_SAFARI_ITERATORS,Bn=f("iterator"),Wn=function(){return this},r=function(e,t,n,r,o,i,u){h=t+" Iterator",(s=n).prototype=ln(kn,{next:q(1,r)}),An(s,h,!1),Sn[h]=Nn;var a,c,r=function(e){if(e===o&&p)return p;if(!qn&&e in l)return l[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},s=t+" Iterator",f=!1,l=e.prototype,d=l[Bn]||l["@@iterator"]||o&&l[o],p=!qn&&d||r(o),h="Array"==t&&l.entries||d;if(h&&(e=In(h.call(new e)))!==Object.prototype&&e.next&&(In(e)!==Hn&&(Un?Un(e,Hn):O(e[Bn])||st(e,Bn,Wn)),An(e,s,!0)),Fn&&"values"==o&&d&&"values"!==d.name&&(Mn?Ve(l,"name","values"):(f=!0,p=function(){return m(d,this)})),o)if(a={values:r("values"),keys:i?p:r("keys"),entries:r("entries")},u)for(c in a)!qn&&!f&&c in l||st(l,c,a[c]);else g({target:t,proto:!0,forced:qn||f},a);return l[Bn]!==p&&st(l,Bn,p,{name:o}),Sn[t]=p,a},Gn=function(e,t){return{value:e,done:t}},u=$e.f,$n=at.set,Vn=at.getterFor("Array Iterator"),Xn=r(Array,"Array",function(e,t){$n(this,{type:"Array Iterator",target:ee(e),index:0,kind:t})},function(){var e=Vn(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=undefined,Gn(undefined,!0)):Gn("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)},"values"),y=Sn.Arguments=Sn.Array;if(n("keys"),n("values"),n("entries"),d&&"values"!==y.name)try{u(y,"name",{value:"values"})}catch(_){}var Jn=s("".charAt),Kn=s("".charCodeAt),zn=s("".slice),y=function(o){return function(e,t){var n,e=S(Z(e)),t=pt(t),r=e.length;return t<0||r<=t?o?"":undefined:(n=Kn(e,t))<55296||56319<n||t+1===r||(r=Kn(e,t+1))<56320||57343<r?o?Jn(e,t):n:o?zn(e,t,t+2):r-56320+(n-55296<<10)+65536}},u={codeAt:y(!1),charAt:y(!0)},Yn=u.charAt,Qn=at.set,Zn=at.getterFor("String Iterator"),er=(r(String,"String",function(e){Qn(this,{type:"String Iterator",string:S(e),index:0})},function(){var e=Zn(this),t=e.string,n=e.index;return n>=t.length?Gn(undefined,!0):(t=Yn(t,n),e.index+=t.length,Gn(t,!1))}),function(e,t,n){t=ke(t);t in e?$e.f(e,t,q(0,n)):e[t]=n}),tr=Array,nr=Math.max,rr=xt.f,or="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ir={f:function(e){if(!or||"Window"!=X(e))return rr(ee(e));try{return rr(e)}catch(_){for(var t=or,e=bt(t),n=yt(void 0,e),r=yt(void 0===undefined?e:void 0,e),o=tr(nr(r-n,0)),i=0;n<r;n++,i++)er(o,i,t[n]);return o.length=i,o}}},ur=c(function(){var e;"function"==typeof ArrayBuffer&&(e=new ArrayBuffer(8),Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8}))}),ar=Object.isExtensible,cr=c(function(){ar(1)})||ur?function(e){return!!l(e)&&(!ur||"ArrayBuffer"!=X(e))&&(!ar||ar(e))}:ar,sr=!c(function(){return Object.isExtensible(Object.preventExtensions({}))}),y=t(function(e){var t=$e.f,n=!1,u=xe("meta"),r=0,o=function(e){t(e,u,{value:{objectID:"O"+r++,weakData:{}}})},a=e.exports={enable:function(){a.enable=function(){},n=!0;var o=xt.f,i=s([].splice),e={};e[u]=1,o(e).length&&(xt.f=function(e){for(var t=o(e),n=0,r=t.length;n<r;n++)if(t[n]===u){i(t,n,1);break}return t},g({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ir.f}))},fastKey:function(e,t){if(!l(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!b(e,u)){if(!cr(e))return"F";if(!t)return"E";o(e)}return e[u].objectID},getWeakData:function(e,t){if(!b(e,u)){if(!cr(e))return!0;if(!t)return!1;o(e)}return e[u].weakData},onFreeze:function(e){return sr&&n&&cr(e)&&!b(e,u)&&o(e),e}};it[u]=!0}),fr=f("iterator"),lr=Array.prototype,dr=f("iterator"),pr=function(e){if(!Y(e))return he(e,dr)||he(e,"@@iterator")||Sn[Bt(e)]},hr=TypeError,gr=function(e,t,n){var r,o;R(e);try{if(!(r=he(e,"return"))){if("throw"===t)throw n;return n}r=m(r,e)}catch(_){o=!0,r=_}if("throw"===t)throw n;if(o)throw r;return R(r),n},yr=TypeError,vr=function(e,t){this.stopped=e,this.result=t},mr=vr.prototype,br=function(e,t,n){var r,o,i,u,a,c,s=n&&n.that,f=!(!n||!n.AS_ENTRIES),l=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),h=Ut(t,s),g=function(e){return r&&gr(r,"normal",e),new vr(!0,e)},y=function(e){return f?(R(e),p?h(e[0],e[1],g):h(e[0],e[1])):p?h(e,g):h(e)};if(l)r=e.iterator;else if(d)r=e;else{if(!(n=pr(e)))throw yr(le(e)+" is not iterable");if(n!==undefined&&(Sn.Array===n||lr[fr]===n)){for(o=0,i=bt(e);o<i;o++)if((u=y(e[o]))&&oe(mr,u))return u;return new vr(!1)}r=function(e,t){t=arguments.length<2?pr(e):t;if(pe(t))return R(m(t,e));throw hr(le(e)+" is not iterable")}(e,n)}for(a=(l?e:r).next;!(c=m(a,r)).done;){try{u=y(c.value)}catch(_){gr(r,"throw",_)}if("object"==typeof u&&u&&oe(mr,u))return u}return new vr(!1)},wr=TypeError,Er=function(e,t){if(oe(t,e))return e;throw wr("Incorrect invocation")},Or=f("iterator"),Rr=!1;try{var Sr=0,xr={next:function(){return{done:!!Sr++}},"return":function(){Rr=!0}};xr[Or]=function(){return this},Array.from(xr,function(){throw 2})}catch(_){}var Tr,Pr,Ir,Lr,Cr,jr,Ar,kr,r=function(e,t){if(!t&&!Rr)return!1;var n=!1;try{var r={};r[Or]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(_){}return n},Nr=function(e,t,n){return Un&&O(t=t.constructor)&&t!==n&&l(t=t.prototype)&&t!==n.prototype&&Un(e,t),e},_r=function(e,t,n){for(var r in t)st(e,r,t[r],n);return e},Dr=y.getWeakData,Ur=at.set,Fr=at.getterFor,Mr=p.find,Hr=p.findIndex,qr=s([].splice),Br=0,Wr=function(e){return e.frozen||(e.frozen=new Gr)},Gr=function(){this.entries=[]},$r=function(e,t){return Mr(e.entries,function(e){return e[0]===t})},Vr=(Gr.prototype={get:function(e){e=$r(this,e);if(e)return e[1]},has:function(e){return!!$r(this,e)},set:function(e,t){var n=$r(this,e);n?n[1]=t:this.entries.push([e,t])},"delete":function(t){var e=Hr(this.entries,function(e){return e[0]===t});return~e&&qr(this.entries,e,1),!!~e}},xr=function(e){return function(){return e(this,arguments.length?arguments[0]:undefined)}},lo={getConstructor:function(e,n,r,o){var e=e(function(e,t){Er(e,i),Ur(e,{type:n,id:Br++,frozen:undefined}),Y(t)||br(t,e[o],{that:e,AS_ENTRIES:r})}),i=e.prototype,u=Fr(n),a=function(e,t,n){var r=u(e),o=Dr(R(t),!0);return!0===o?Wr(r).set(t,n):o[r.id]=n,e};return _r(i,{"delete":function(e){var t,n=u(this);return!!l(e)&&(!0===(t=Dr(e))?Wr(n)["delete"](e):t&&b(t,n.id)&&delete t[n.id])},has:function(e){var t,n=u(this);return!!l(e)&&(!0===(t=Dr(e))?Wr(n).has(e):t&&b(t,n.id))}}),_r(i,r?{get:function(e){var t,n=u(this);if(l(e))return!0===(t=Dr(e))?Wr(n).get(e):t?t[n.id]:undefined},set:function(e,t){return a(this,e,t)}}:{add:function(e){return a(this,e,!0)}}),e}},Pr=-1!==(E="WeakSet").indexOf("Map"),Ir=-1!==E.indexOf("Weak"),Lr=Pr?"set":"add",Cr=v[E],jr=Cr&&Cr.prototype,w={},ao=function(e){var n=s(jr[e]);st(jr,e,"add"==e?function(e){return n(this,0===e?0:e),this}:"delete"==e?function(e){return!(Ir&&!l(e))&&n(this,0===e?0:e)}:"get"==e?function(e){return Ir&&!l(e)?undefined:n(this,0===e?0:e)}:"has"==e?function(e){return!(Ir&&!l(e))&&n(this,0===e?0:e)}:function(e,t){return n(this,0===e?0:e,t),this})},Nt(E,!O(Ar=Cr)||!(Ir||jr.forEach&&!c(function(){(new Cr).entries().next()})))?(Ar=lo.getConstructor(xr,E,Pr,Lr),y.enable()):Nt(E,!0)&&(y=(Tr=new Ar)[Lr](Ir?{}:-0,1)!=Tr,Jr=c(function(){Tr.has(1)}),Xr=r(function(e){new Cr(e)}),Kr=!Ir&&c(function(){for(var e=new Cr,t=5;t--;)e[Lr](t,t);return!e.has(-0)}),Xr||(((Ar=xr(function(e,t){Er(e,jr);e=Nr(new Cr,e,Ar);return Y(t)||br(t,e[Lr],{that:e,AS_ENTRIES:Pr}),e})).prototype=jr).constructor=Ar),(Jr||Kr)&&(ao("delete"),ao("has"),Pr&&ao("get")),(Kr||y)&&ao(Lr),Ir&&jr.clear&&delete jr.clear),w[E]=Ar,g({global:!0,constructor:!0,forced:Ar!=Cr},w),An(Ar,E),Ir||lo.setStrong(Ar,E,Pr),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Xr=De("span").classList,Jr=Xr&&Xr.constructor&&Xr.constructor.prototype,Kr=Jr===Object.prototype?undefined:Jr,zr=f("iterator"),Yr=f("toStringTag"),Qr=Xn.values,Zr=function(e,t){if(e){if(e[zr]!==Qr)try{Ve(e,zr,Qr)}catch(_){e[zr]=Qr}if(e[Yr]||Ve(e,Yr,t),Vr[t])for(var n in Xn)if(e[n]!==Xn[n])try{Ve(e,n,Xn[n])}catch(_){e[n]=Xn[n]}}};for(kr in Vr)Zr(v[kr]&&v[kr].prototype,kr);Zr(Kr,"DOMTokenList");var eo,to,no,ro=Date,oo=s(ro.prototype.getTime),y=(g({target:"Date",stat:!0},{now:function(){return oo(new ro)}}),Date.prototype),io=s(y.toString),uo=s(y.getTime),ao=("Invalid Date"!=String(new Date(NaN))&&st(y,"toString",function(){var e=uo(this);return e==e?io(this):"Invalid Date"}),Xe.EXISTS),w=$e.f,E=Function.prototype,co=s(E.toString),so=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,fo=s(so.exec),lo=(d&&!ao&&w(E,"name",{configurable:!0,get:function(){try{return fo(so,co(this))[1]}catch(_){return""}}}),function(e,t){var n=[][e];return!!n&&c(function(){n.call(null,t||function(){return 1},1)})}),po=p.forEach,ho=lo("forEach")?[].forEach:function(e){return po(this,e,1<arguments.length?arguments[1]:undefined)},go=(g({target:"Array",proto:!0,forced:[].forEach!=ho},{forEach:ho}),function(e){if(e&&e.forEach!==ho)try{Ve(e,"forEach",ho)}catch(_){e.forEach=ho}});for(eo in Vr)Vr[eo]&&go(v[eo]&&v[eo].prototype);function yo(e){this.name="__st"+(1e9*Math.random()>>>0)+to+"__",null!=e&&e.forEach(this.add,this),to+=1}go(Kr),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o+=1}return undefined}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return this.substring(t=!t||t<0?0:+t,t+e.length)===e}}),window.WeakSet||(to=Date.now()%1e9,yo.prototype.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},yo.prototype["delete"]=function(e){return!!e[this.name]&&(e[this.name]=undefined,!0)},yo.prototype.has=function(e){return!!e[this.name]},no=yo,Object.defineProperty(window,"WeakSet",{value:function(e){return new no(e)}}));var vo=Object.assign,mo=Object.defineProperty,bo=s([].concat),y=!vo||c(function(){var e,t,n;return!(!d||1===vo({b:1},vo(mo({},"a",{enumerable:!0,get:function(){mo(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)||(t={},(e={})[n=Symbol()]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=vo({},e)[n]||"abcdefghijklmnopqrst"!=nn(vo({},t)).join(""))})?function(e,t){for(var n=we(e),r=arguments.length,o=1,i=Tt.f,u=H.f;o<r;)for(var a,c=z(arguments[o++]),s=i?bo(nn(c),i(c)):nn(c),f=s.length,l=0;l<f;)a=s[l++],d&&!m(u,c,a)||(n[a]=c[a]);return n}:vo,ao=(g({target:"Object",stat:!0,arity:2,forced:Object.assign!==y},{assign:y}),c(function(){nn(1)})),wo=(g({target:"Object",stat:!0,forced:ao},{keys:function(e){return nn(we(e))}}),Me.f),E=c(function(){wo(1)});function Eo(e){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}g({target:"Object",stat:!0,forced:!d||E,sham:!d},{getOwnPropertyDescriptor:function(e,t){return wo(ee(e),t)}}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e===undefined||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if((r=arguments[n])!==undefined&&null!==r)for(var r=Object(r),o=Object.keys(Object(r)),i=0,u=o.length;i<u;i++){var a=o[i],c=Object.getOwnPropertyDescriptor(r,a);null!=c&&c.enumerable&&(t[a]=r[a])}return t}});var w=ir.f,y=c(function(){return!Object.getOwnPropertyNames(1)}),ao=(g({target:"Object",stat:!0,forced:y},{getOwnPropertyNames:w}),g({target:"Object",stat:!0,sham:!d},{getOwnPropertyDescriptors:function(e){for(var t,n,r=ee(e),o=Me.f,i=It(r),u={},a=0;i.length>a;)(n=o(r,t=i[a++]))!==undefined&&er(u,t,n);return u}}),Function.prototype),Oo=ao.apply,Ro=ao.call,So="object"==typeof Reflect&&Reflect.apply||(F?Ro.bind(Oo):function(){return Ro.apply(Oo,arguments)}),xo=s([].slice),To=re("JSON","stringify"),Po=s(/./.exec),Io=s("".charAt),Lo=s("".charCodeAt),Co=s("".replace),jo=s(1..toString),Ao=/[\uD800-\uDFFF]/g,ko=/^[\uD800-\uDBFF]$/,No=/^[\uDC00-\uDFFF]$/,_o=!ue||c(function(){var e=re("Symbol")();return"[null]"!=To([e])||"{}"!=To({a:e})||"{}"!=To(Object(e))}),Do=c(function(){return'"\\udf06\\ud834"'!==To("\udf06\ud834")||'"\\udead"'!==To("\udead")}),Uo=function(e,t){var n=xo(arguments),r=t;if((l(t)||e!==undefined)&&!se(e))return Ft(t)||(t=function(e,t){if(O(r)&&(t=m(r,this,e,t)),!se(t))return t}),n[1]=t,So(To,null,n)},Fo=function(e,t,n){var r=Io(n,t-1),n=Io(n,t+1);return Po(ko,e)&&!Po(No,n)||Po(No,e)&&!Po(ko,r)?"\\u"+jo(Lo(e,0),16):e},Mo=(To&&g({target:"JSON",stat:!0,arity:3,forced:_o||Do},{stringify:function(e,t,n){var r=xo(arguments),r=So(_o?Uo:To,null,r);return Do&&"string"==typeof r?Co(r,Ao,Fo):r}}),f("species")),E=function(t){return 51<=ie||!c(function(){var e=[];return(e.constructor={})[Mo]=function(){return{foo:1}},1!==e[t](Boolean).foo})},Ho=p.filter,y=E("filter"),w=(g({target:"Array",proto:!0,forced:!y},{filter:function(e){return Ho(this,e,1<arguments.length?arguments[1]:undefined)}}),E("slice")),qo=f("species"),Bo=Array,Wo=Math.max,Go=(g({target:"Array",proto:!0,forced:!w},{slice:function(e,t){var n,r,o,i=ee(this),u=bt(i),a=yt(e,u),c=yt(t===undefined?u:t,u);if(Ft(i)&&(n=i.constructor,(n=Yt(n)&&(n===Bo||Ft(n.prototype))||l(n)&&null===(n=n[qo])?undefined:n)===Bo||n===undefined))return xo(i,a,c);for(r=new(n===undefined?Bo:n)(Wo(c-a,0)),o=0;a<c;a++,o++)a in i&&er(r,o,i[a]);return r.length=o,r}}),a.indexOf),$o=s([].indexOf),Vo=!!$o&&1/$o([1],1,-0)<0,ao=lo("indexOf"),Xo=(g({target:"Array",proto:!0,forced:Vo||!ao},{indexOf:function(e){var t=1<arguments.length?arguments[1]:undefined;return Vo?$o(this,e,t)||0:Go(this,e,t)}}),TypeError),Jo=Object.getOwnPropertyDescriptor,Ko=d&&!function(){if(this!==undefined)return 1;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(_){return _ instanceof TypeError}}()?function(e,t){if(Ft(e)&&!Jo(e,"length").writable)throw Xo("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},zo=TypeError,Yo=function(e){if(9007199254740991<e)throw zo("Maximum allowed index exceeded");return e},Qo=TypeError,Zo=function(e,t){if(!delete e[t])throw Qo("Cannot delete property "+le(t)+" of "+le(e))},y=E("splice"),ei=Math.max,ti=Math.min,ni=(g({target:"Array",proto:!0,forced:!y},{splice:function(e,t){var n,r,o,i,u,a,c=we(this),s=bt(c),f=yt(e,s),e=arguments.length;for(0===e?n=r=0:r=1===e?(n=0,s-f):(n=e-2,ti(ei(pt(t),0),s-f)),Yo(s+n-r),o=en(c,r),i=0;i<r;i++)(u=f+i)in c&&er(o,i,c[u]);if(n<(o.length=r)){for(i=f;i<s-r;i++)a=i+n,(u=i+r)in c?c[a]=c[u]:Zo(c,a);for(i=s;s-r+n<i;i--)Zo(c,i-1)}else if(r<n)for(i=s-r;f<i;i--)a=i+n-1,(u=i+r-1)in c?c[a]=c[u]:Zo(c,a);for(i=0;i<n;i++)c[i+f]=arguments[i+2];return Ko(c,s-r+n),o}}),s([].join)),w=z!=Object,a=lo("join",","),ri=(g({target:"Array",proto:!0,forced:w||!a},{join:function(e){return ni(ee(this),e===undefined?",":e)}}),p.map),ao=E("map"),y=(g({target:"Array",proto:!0,forced:!ao},{map:function(e){return ri(this,e,1<arguments.length?arguments[1]:undefined)}}),g({target:"Object",stat:!0},{setPrototypeOf:Un}),c(function(){In(1)})),oi=(g({target:"Object",stat:!0,forced:y,sham:!h},{getPrototypeOf:function(e){return In(we(e))}}),function(e,t){return(oi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)}),x=function(){return(x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ii(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],u=0,a=i.length;u<a;u++,o++)r[o]=i[u];return r}var ui=["ext1","ext2","ext3","level","trace","tag","seq","code"];g({target:"Array",stat:!0},{isArray:Ft});var ai=function(){var e=R(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},ci=v.RegExp,w=c(function(){var e=ci("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),a=w||c(function(){return!ci("a","y").sticky}),ao={BROKEN_CARET:w||c(function(){var e=ci("^r","gy");return e.lastIndex=2,null!=e.exec("str")}),MISSED_STICKY:a,UNSUPPORTED_Y:w},si=v.RegExp,y=c(function(){var e=si(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}),fi=v.RegExp,h=c(function(){var e=fi("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}),li=at.get,di=B("native-string-replace",String.prototype.replace),pi=RegExp.prototype.exec,hi=pi,gi=s("".charAt),yi=s("".indexOf),vi=s("".replace),mi=s("".slice),bi=(a=/b*/g,m(pi,w=/a/,"a"),m(pi,a,"a"),0!==w.lastIndex||0!==a.lastIndex),wi=ao.BROKEN_CARET,Ei=/()??/.exec("")[1]!==undefined,Oi=hi=bi||Ei||wi||y||h?function(e){var t,n,r,o,i,u,a=this,c=li(a),e=S(e),s=c.raw;if(s)return s.lastIndex=a.lastIndex,l=m(hi,s,e),a.lastIndex=s.lastIndex,l;var f=c.groups,s=wi&&a.sticky,l=m(ai,a),c=a.source,d=0,p=e;if(s&&(l=vi(l,"y",""),-1===yi(l,"g")&&(l+="g"),p=mi(e,a.lastIndex),0<a.lastIndex&&(!a.multiline||a.multiline&&"\n"!==gi(e,a.lastIndex-1))&&(c="(?: "+c+")",p=" "+p,d++),t=new RegExp("^(?:"+c+")",l)),Ei&&(t=new RegExp("^"+c+"$(?!\\s)",l)),bi&&(n=a.lastIndex),r=m(pi,s?t:a,p),s?r?(r.input=mi(r.input,d),r[0]=mi(r[0],d),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:bi&&r&&(a.lastIndex=a.global?r.index+r[0].length:n),Ei&&r&&1<r.length&&m(di,r[0],t,function(){for(o=1;o<arguments.length-2;o++)arguments[o]===undefined&&(r[o]=undefined)}),r&&f)for(r.groups=i=ln(null),o=0;o<f.length;o++)i[(u=f[o])[0]]=r[u[1]];return r}:hi,Ri=(g({target:"RegExp",proto:!0,forced:/./.exec!==Oi},{exec:Oi}),f("species")),Si=RegExp.prototype,B=function(n,e,t,r){var u,o=f(n),a=!c(function(){var e={};return e[o]=function(){return 7},7!=""[n](e)}),i=a&&!c(function(){var e=!1,t=/a/;return"split"===n&&((t={}).constructor={},t.constructor[Ri]=function(){return t},t.flags="",t[o]=/./[o]),t.exec=function(){return e=!0,null},t[o](""),!e});a&&i&&!t||(u=s(/./[o]),i=e(o,""[n],function(e,t,n,r,o){var e=s(e),i=t.exec;return i===Oi||i===Si.exec?a&&!o?{done:!0,value:u(t,n,r)}:{done:!0,value:e(n,t,r)}:{done:!1}}),st(String.prototype,n,i[0]),st(Si,o,i[1])),r&&Ve(Si[o],"sham",!0)},xi=u.charAt,Ti=function(e,t,n){return t+(n?xi(e,t).length:1)},Pi=Math.floor,Ii=s("".charAt),Li=s("".replace),Ci=s("".slice),ji=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Ai=/\$([$&'`]|\d{1,2})/g,ki=TypeError,Ni=function(e,t){var n=e.exec;if(O(n))return null!==(n=m(n,e,t))&&R(n),n;if("RegExp"===X(e))return m(Oi,e,t);throw ki("RegExp#exec called on incompatible receiver")},_i=f("replace"),Di=Math.max,Ui=Math.min,Fi=s([].concat),Mi=s([].push),Hi=s("".indexOf),qi=s("".slice),w="$0"==="a".replace(/./,"$0"),Bi=!!/./[_i]&&""===/./[_i]("a","$0");B("replace",function(e,b,w){var E=Bi?"$":"$0";return[function(e,t){var n=Z(this),r=Y(e)?undefined:he(e,_i);return r?m(r,e,n,t):m(b,S(n),e,t)},function(e,t){var n=R(this),r=S(e);if("string"==typeof t&&-1===Hi(t,E)&&-1===Hi(t,"$<")){e=w(b,n,r,t);if(e.done)return e.value}var o,i=O(t),u=(i||(t=S(t)),n.global);u&&(o=n.unicode,n.lastIndex=0);for(var a=[];;){var c=Ni(n,r);if(null===c)break;if(Mi(a,c),!u)break;""===S(c[0])&&(n.lastIndex=Ti(r,mt(n.lastIndex),o))}for(var s,f="",l=0,d=0;d<a.length;d++){for(var p=S((c=a[d])[0]),h=Di(Ui(pt(c.index),r.length),0),g=[],y=1;y<c.length;y++)Mi(g,(s=c[y])===undefined?s:String(s));var v=c.groups,m=i?(m=Fi([p],g,h,r),v!==undefined&&Mi(m,v),S(So(t,undefined,m))):function(i,u,a,c,s,e){var f=a+i.length,l=c.length,t=Ai;return s!==undefined&&(s=we(s),t=ji),Li(e,t,function(e,t){var n;switch(Ii(t,0)){case"$":return"$";case"&":return i;case"`":return Ci(u,0,a);case"'":return Ci(u,f);case"<":n=s[Ci(t,1,-1)];break;default:var r,o=+t;if(0==o)return e;if(l<o)return 0!==(r=Pi(o/10))&&r<=l?c[r-1]===undefined?Ii(t,1):c[r-1]+Ii(t,1):e;n=c[o-1]}return n===undefined?"":n})}(p,r,h,g,v,t);l<=h&&(f+=qi(r,l,h)+m,l=h+p.length)}return f+qi(r,l)}]},!!c(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})||!w||Bi);Wi=!1,(a=/[ac]/).exec=function(){return Wi=!0,/./.exec.apply(this,arguments)};var Wi,ao=!0===a.test("abc")&&Wi,Gi=/./.test,$i=(g({target:"RegExp",proto:!0,forced:!ao},{test:function(e){var t=R(this),e=S(e),n=t.exec;return O(n)?null!==(n=m(n,t,e))&&(R(n),!0):m(Gi,t,e)}}),RegExp.prototype),y=Xe.PROPER,Vi=RegExp.prototype.toString,h=c(function(){return"/a/b"!=Vi.call({source:"a",flags:"b"})}),u=y&&"toString"!=Vi.name,Xi=((h||u)&&st(RegExp.prototype,"toString",function(){var e,t=R(this);return"/"+S(t.source)+"/"+S((e=(t=t).flags)!==undefined||"flags"in $i||b(t,"flags")||!oe($i,t)?e:m(ai,t))},{unsafe:!0}),p.some),w=lo("some"),Ji=(g({target:"Array",proto:!0,forced:!w},{some:function(e){return Xi(this,e,1<arguments.length?arguments[1]:undefined)}}),f("isConcatSpreadable")),a=51<=ie||!c(function(){var e=[];return e[Ji]=!1,e.concat()[0]!==e}),ao=E("concat");g({target:"Array",proto:!0,arity:1,forced:!a||!ao},{concat:function(e){for(var t,n,r,o,i,u=we(this),a=en(u,0),c=0,s=-1,f=arguments.length;s<f;s++)if(o=r=-1===s?u:arguments[s],i=void 0,!l(o)||((i=o[Ji])!==undefined?!i:!Ft(o)))Yo(c+1),er(a,c++,r);else for(n=bt(r),Yo(c+n),t=0;t<n;t++,c++)t in r&&er(a,c,r[t]);return a.length=c,a}});Zi.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},Zi.prototype.on=function(e,t,n){var r;if(void 0===n&&(n=0),this)return(r=this.eventsList[e])||(this.eventsList[e]=[],r=this.eventsList[e]),-1===this.indexOf(r,t)&&r.push({name:e,type:n||0,callback:t}),this},Zi.prototype.one=function(e,t){this.on(e,t,1)},Zi.prototype.remove=function(e,t){if(this){var n=this.eventsList[e];if(n){if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.eventsList[e]}catch(D){}}return null}},Zi.prototype.clear=function(){this.eventsList={}};var Ki,zi=Zi,Yi=function(e){if(!e||0===e.length)return"{}";e=Array.isArray(e)?e:[e];var t=Object.keys(e[0]),n={};return t.forEach(function(t){n[t]=e.map(function(e){return e[t]})}),n.count=e.length,lu(n)},Qi=function(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}};function Zi(){var u=this;this.emit=function(e,t){if(u){var n;if(null!=(r=u.eventsList[e])&&r.length)for(var r=r.slice(),o=0;o<r.length;o++){n=r[o];try{var i=n.callback.apply(u,[t]);if(1===n.type&&u.remove(e,n.callback),!1===i)break}catch(d){throw d}}return u}},this.eventsList={}}(y=Ki=Ki||{})[y.number=-1]="number",y.string="";var T,P,eu,tu=function(e,t){return"number"==typeof e||"string"==typeof e?e:t?Ki.string:Ki.number},nu=function(e,t){return"string"==typeof e?e.split("?")[t?1:0]||"":e},ru=function(e){return"string"==typeof e&&e.startsWith("//")?"https:"===(null===location||void 0===location?void 0:location.protocol):/^https/.test(e)},ou=["application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/ecmascript","application/vnd.mspowerpoint","application/vnd.apple.mpegurl","application/ogg","text/css","text/javascript","image","audio","video"],iu=/\.(json|js|css|jpg|jpeg|png|svg|apng|webp|gif|bmp|mp4|mp3|mpeg|wav|webm|ogg|flv|m3u8|ttf|woff2|otf|eot|woff|)$/gi,uu=["ret","retcode","code","errcode"],au=function(e,t,n){var r,o;try{if("function"==typeof(null==t?void 0:t.retCodeHandler))return{code:void 0===(i=(o=t.retCodeHandler(e,null==n?void 0:n.url,null==n?void 0:n.ctx,null==n?void 0:n.payload)||{}).code)?"unknown":i,isErr:o.isErr};"string"==typeof e&&(e=JSON.parse(e)),"function"==typeof(null==(r=null==t?void 0:t.ret)?void 0:r.join)&&(uu=[].concat(t.ret.map(function(e){return e.toLowerCase()})));var i,u=Object.getOwnPropertyNames(e).filter(function(e){return-1!==uu.indexOf(e.toLowerCase())});return u.length?{code:""+(i=e[u[0]]),isErr:0!==i&&"0"!==i}:{code:"unknown",isErr:!1}}catch(d){return{code:"unknown",isErr:!1}}},cu=function(e,t,n){try{var r="function"==typeof t?t(e,null==n?void 0:n.url)||"":e;return du(r).slice(0,102400)}catch(D){return""}},su=function(){var n=new WeakSet;return function(e,t){if(t instanceof Error)return"Error.message: "+t.message+" \n  Error.stack: "+t.stack;if("object"===Eo(t)&&null!==t){if(n.has(t))return"[Circular "+(e||"root")+"]";n.add(t)}return t}},fu=function(e){if("string"==typeof e)return e;try{return e instanceof Error?(JSON.stringify(e,su(),4)||"undefined").replace(/"/gim,""):JSON.stringify(e,su(),4)||"undefined"}catch(t){return"error happen when aegis stringify: \n "+t.message+" \n "+t.stack}},lu=function(e){if("string"==typeof e)return e;try{return JSON.stringify(e,su())||"undefined"}catch(t){return"error happen when aegis stringify: \n "+t.message+" \n "+t.stack}},du=function gs(n,r){void 0===r&&(r=3);var o,i,u,a="";return Array.isArray(n)?(a+="[",o=n.length,n.forEach(function(e,t){"object"===Eo(e)&&1<r?a+=gs(e,r-1):a+=hu(e),a+=t===o-1?"":","}),a+="]"):n instanceof Object?(a="{",i=Object.keys(n),u=i.length,i.forEach(function(e,t){"object"===Eo(n[e])&&1<r?a+='"'+e+'":'+gs(n[e],r-1):a+=pu(e,n[e]),a+=t===u-1||t<u-1&&"undefined"==typeof n[i[t+1]]?"":","}),a+="}"):a+=n,a},pu=function(e,t){var n=Eo(t),r="";return"string"===n||"object"===n?r+='"'+e+'":"'+t+'"':"function"==typeof t?r+='"'+e+'":"function '+t.name+'"':"symbol"===Eo(t)?r+='"'+e+'":"symbol"':"number"!=typeof t&&"boolean"!==n||(r+='"'+e+'": '+t),r},hu=function(e){var t=Eo(e);return""+("undefined"===t||"symbol"===t||"function"===t?"null":"string"===t||"object"===t?'"'+e+'"':e)},gu=((h=T=T||{}).INFO_ALL="-1",h.API_RESPONSE="1",h.INFO="2",h.ERROR="4",h.PROMISE_ERROR="8",h.AJAX_ERROR="16",h.SCRIPT_ERROR="32",h.IMAGE_ERROR="64",h.CSS_ERROR="128",h.CONSOLE_ERROR="256",h.MEDIA_ERROR="512",h.RET_ERROR="1024",h.REPORT="2048",h.PV="4096",h.EVENT="8192",h.PAGE_NOT_FOUND_ERROR="16384",h.WEBSOCKET_ERROR="32768",h.BRIDGE_ERROR="65536",0,0,(u=P=P||{}).LOG="log",u.SPEED="speed",u.PERFORMANCE="performance",u.OFFLINE="offline",u.WHITE_LIST="whiteList",u.VITALS="vitals",u.PV="pv",u.CUSTOM_PV="customPV",u.EVENT="event",u.CUSTOM="custom",u.SDK_ERROR="sdkError",u.SET_DATA="setData",u.LOAD_PACKAGE="loadPackage",(w=eu=eu||{}).production="production",w.development="development",w.gray="gray",w.pre="pre",w.daily="daily",w.local="local",w.test="test",w.others="others",TypeError),E=function(s){return function(e,t,n,r){pe(t);var o=we(e),i=z(o),u=bt(o),a=s?u-1:0,c=s?-1:1;if(n<2)for(;;){if(a in i){r=i[a],a+=c;break}if(a+=c,s?a<0:u<=a)throw gu("Reduce of empty array with no initial value")}for(;s?0<=a:a<u;a+=c)a in i&&(r=t(r,i[a],a,o));return r}},a={left:E(!1),right:E(!0)},yu="process"==X(v.process),vu=a.left,ao=lo("reduce"),mu=(g({target:"Array",proto:!0,forced:!ao||!yu&&79<ie&&ie<83},{reduce:function(e){var t=arguments.length;return vu(this,e,t,1<t?arguments[1]:undefined)}}),TypeError),bu=function(e,t){if(e<t)throw mu("Not enough arguments");return e},wu=/MSIE .\./.test(e),Eu=v.Function,y=function(i){return wu?function(e,t){var n=2<bu(arguments.length,1),r=O(e)?e:Eu(e),o=n?xo(arguments,2):undefined;return i(n?function(){So(r,this,o)}:r,t)}:i},h={setTimeout:y(v.setTimeout),setInterval:y(v.setInterval)},u=h.setInterval,w=(g({global:!0,bind:!0,forced:v.setInterval!==u},{setInterval:u}),h.setTimeout),Ou=(g({global:!0,bind:!0,forced:v.setTimeout!==w},{setTimeout:w}),function(e){return e.filter(function(n,r){return"static"!==n.type||!e.find(function(e,t){return n.url===e.url&&200===n.status&&r<t})})}),Ru=function(n,r){var o,i=[],u=n.config;return n.lifeCycle.on("destroy",function(){i.length=0}),function(e,t){Array.isArray(e)?i=i.concat(e):i.push(e),r&&i.length>=r||n.sendNow&&0<i.length?(i=Ou(i),t(i.splice(0,i.length)),o&&clearTimeout(o)):(o&&clearTimeout(o),o=setTimeout(function(){o=null,0<(i=Ou(i)).length&&t(i.splice(0,i.length))},u.delay))}},Su=function(e,t){return Array.isArray(e)?t(e.map(function(e){return t=x(x({},e),{msg:"string"==typeof e.msg?e.msg:[].concat(e.msg).map(fu).join(" ")}),ui.forEach(function(e){t[e]||delete t[e]}),t;var t})):t([x(x({},e),{msg:"string"==typeof e.msg?e.msg:fu(e.msg)})])},xu=function(e){e.level===T.INFO_ALL&&(e.level=T.INFO)},Tu=RangeError,E=function(e){var t=S(Z(this)),n="",r=pt(e);if(r<0||r==Infinity)throw Tu("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},Pu=(g({target:"String",proto:!0},{repeat:E}),function(e){return(Array.isArray(e)?e:[e]).map(function(n){return Object.getOwnPropertyNames(n).reduce(function(e,t){return"ctx"!==t&&(e[t]=n[t]),e},{level:T.INFO,msg:""})})}),Iu=function(r){return function(e){return r.sendPipeline([function(e,n){return n({url:r.config.url||"",data:Yi(Pu(e)),method:"post",contentType:"application/json",type:P.LOG,log:e,requestConfig:{timeout:5e3},success:function(){var t=r.config.onReport;"function"==typeof t&&e.forEach(function(e){t(e)}),"function"==typeof n&&n([])}})}],P.LOG)(e)}},Lu=function(c,s){return function(e,t){var n,r,o,i=Array.isArray(e),u=i?e:[e],a=(c.lifeCycle.emit("beforeRequest",e),c.config.beforeRequest);(u="function"==typeof a?u.map(function(e){try{var t=a({logs:e,logType:s});return(null==t?void 0:t.logType)===s&&null!=t&&t.logs?t.logs:!1!==t&&e}catch(_){return e}}).filter(function(e){return!1!==e}):u).length&&(n=u,e=ui,!Array.isArray(n)||n.length<=1||(r=[],o=[],!(o="string"==typeof e?[e]:e)||o.length<=0||(o.forEach(function(t){n.forEach(function(e){null!=e&&e[t]&&r.push(t)})}),0<r.length&&(n=n.map(function(e){var t={};return r.forEach(function(e){t[e]=""}),x(x({},t),e)})))),u=n,t(i?u:u[0]))}},Cu=function(o){return function(e,t){o.lifeCycle.emit("modifyRequest",e);var n=o.config.modifyRequest;if("function"==typeof n)try{var r=n(e);"object"===Eo(r)&&"url"in r&&(e=r)}catch(_){console.error(_)}t(e)}},ju=function(r){return function(e,t){null!=(n=r.lifeCycle)&&n.emit("afterRequest",e);var n=(r.config||{}).afterRequest;"function"==typeof n&&!1===n(e)||t(e)}},Au=function(){},ku=function(n){if(n&&n.reduce&&n.length)return 1===n.length?function(e,t){n[0](e,t||Au)}:n.reduce(function(n,r){return function(e,t){return void 0===t&&(t=Au),n(e,function(e){return null==r?void 0:r(e,t)})}});throw new TypeError("createPipeline need at least one function param")},Nu=function(t,n){Object.getOwnPropertyNames(t).forEach(function(e){"function"==typeof t[e]&&"constructor"!==e&&(n?n[e]="sendPipeline"===e?function(){return function(){}}:function(){}:t[e]=function(){})})},a=(Object.defineProperty(I.prototype,"__version__",{get:function(){return console.warn("__version__ has discard, please use version"),"1.36.6"},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"LogType",{get:function(){return console.warn("LogType has discard, please use logType"),T},enumerable:!1,configurable:!0}),I.prototype.init=function(e){this.setConfig(e);for(var t=0;t<I.installedPlugins.length;t++)try{I.installedPlugins[t].patch(this)}catch(i){this.sendSDKError(i)}this.lifeCycle.emit("onInited")},I.prototype.setConfig=function(e){Object.assign(this.config,e);var e=this.config,t=e.id,n=e.uin,r=e.version,o=e.ext1,i=e.ext2,u=e.ext3,a=e.aid,c=e.env,s=void 0===c?"production":c,c=e.pageUrl,e=this.bean.id!==t||this.bean.uin!==n||this.bean.aid!==a;return this.bean.id=t||"",this.bean.uin=n||"",this.bean.version=r||"1.36.6",this.bean.aid=a||"",this.bean.env=function(){switch(s){case eu.production:case eu.development:case eu.gray:case eu.pre:case eu.daily:case eu.local:case eu.test:case eu.others:return 1;default:return}}()?s:eu.others,c&&this.extendBean("from",encodeURIComponent(c.slice(0,2048))),o&&this.extendBean("ext1",encodeURIComponent(o)),i&&this.extendBean("ext2",encodeURIComponent(i)),u&&this.extendBean("ext3",encodeURIComponent(u)),e&&this.lifeCycle.emit("onConfigChange",this.config),this.config},I.use=function(e){-1===I.installedPlugins.indexOf(e)&&e.aegisPlugin&&I.installedPlugins.push(e)},I.unuse=function(e){e=I.installedPlugins.indexOf(e);-1!==e&&I.installedPlugins.splice(e,1)},I.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:T.INFO,msg:e};1===e.length&&e[0].msg&&Object.assign(n,x({},e[0]),{level:T.INFO}),this.normalLogPipeline(n)},I.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:T.INFO_ALL,msg:e};1===e.length&&e[0].msg&&Object.assign(n,x({},e[0]),{level:T.INFO_ALL}),this.normalLogPipeline(n)},I.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:T.REPORT,msg:e};1===e.length&&e[0].msg&&Object.assign(n,x({},e[0])),this.normalLogPipeline(n)},I.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:T.ERROR,msg:e};1===e.length&&e[0].msg&&Object.assign(n,x({},e[0]),{level:T.ERROR}),this.normalLogPipeline(n)},I.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},I.prototype.reportPv=function(n){var r,o=this;n&&(console.warn("reportPv is deprecated, please use reportEvent"),r=""+Object.getOwnPropertyNames(this.bean).filter(function(e){return"id"!==e}).map(function(e){return e+"="+o.bean[e]}).join("&"),this.sendPipeline([function(e,t){t({url:o.config.url+"/"+n+"?"+r,addBean:!1,type:P.CUSTOM_PV})}],P.CUSTOM_PV)(null))},I.prototype.reportEvent=function(e){e&&((e="string"==typeof e?{name:e,ext1:this.config.ext1||"",ext2:this.config.ext2||"",ext3:this.config.ext3||""}:e).name?this.eventPipeline(e):console.warn("reportEvent params error"))},I.prototype.reportTime=function(e,t){if("object"===Eo(e))return this.reportT(e);"string"==typeof e?"number"==typeof t?t<0||6e4<t?console.warn("reportTime: duration must between 0 and 60000"):this.submitCustomTime(e,t):console.warn("reportTime: second param must be number"):console.warn("reportTime: first param must be a string")},I.prototype.reportT=function(e){var t=e.name,n=e.duration,r=e.ext1,r=void 0===r?"":r,o=e.ext2,o=void 0===o?"":o,i=e.ext3,i=void 0===i?"":i,e=e.from;if("string"==typeof t&&"number"==typeof n&&"string"==typeof r&&"string"==typeof o&&"string"==typeof i){if(!(n<0||6e4<n))return this.submitCustomTime(t,n,r,o,i,void 0===e?"":e);console.warn("reportTime: duration must between 0 and 60000")}else console.warn("reportTime: params error")},I.prototype.time=function(e){"string"==typeof e?this.timeMap[e]?console.warn("Timer "+e+" already exists"):this.timeMap[e]=Date.now():console.warn("time: first param must be a string")},I.prototype.timeEnd=function(e){"string"==typeof e?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):console.warn("Timer "+e+" does not exist"):console.warn("timeEnd: first param must be a string")},I.prototype.submitCustomTime=function(e,t,n,r,o,i){this.customTimePipeline({name:e,duration:t,ext1:n||this.config.ext1,ext2:r||this.config.ext2,ext3:o||this.config.ext3,from:i||undefined})},I.prototype.extendBean=function(e,t){this.bean[e]=t},I.prototype.sendPipeline=function(e,t){var n,i=this;return ku(ii([function(e,t){if("number"!=typeof n.config.random&&(console.warn("random must in [0, 1], default is 1."),n.config.random=1),!n.isHidden||!n.isGetSample)if(n.isGetSample)n.isHidden||t(e);else{if(n.isGetSample=!0,Math.random()<n.config.random)return n.isHidden=!1,t(e);n.isHidden=!0}},Lu(n=this,t)],e,[Cu(this),function(r,o){i.request(r,function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i.failRequestCount=0,o({isErr:!1,result:t,logType:null==r?void 0:r.type,logs:null==r?void 0:r.log}),null!=(e=null==r?void 0:r.success)&&e.call.apply(e,ii([r],t))},function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];10<=++i.failRequestCount&&i.destroy(),-1<(""+t[0]).indexOf("403 forbidden")&&i.destroy(),o({isErr:!0,result:t,logType:null==r?void 0:r.type,logs:null==r?void 0:r.log}),null!=(e=null==r?void 0:r.fail)&&e.call.apply(e,ii([r],t))})},ju(this)]))},I.prototype.send=function(e,o,i){var t=this;return ku([Cu(this),function(n,r){t.request(n,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r({isErr:!1,result:e,logType:n.type,logs:n.log}),null!=o&&o.apply(void 0,e)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r({isErr:!0,result:e,logType:n.type,logs:n.log}),null!=i&&i.apply(void 0,e)})},ju(this)])(e)},I.prototype.ready=function(e,t,n){throw new Error('You need to override "ready" method')},I.prototype.request=function(e,t,n){throw new Error('You need to override "request" method')},I.prototype.sendSDKError=function(e){var n=this;this.sendPipeline([function(e,t){t({url:n.config.url+"?id=1085&msg[0]="+encodeURIComponent(fu(e))+"&level[0]=2&from="+n.config.id+"&count=1&version="+n.config.id+"(1.36.6)",addBean:!1,method:"get",type:P.SDK_ERROR,log:e})}],P.SDK_ERROR)(e)},I.prototype.destroy=function(e){void 0===e&&(e=!1);var t,n,r=I.instances.indexOf(this);-1!==r&&I.instances.splice(r,1);for(var o=I.installedPlugins.length-1;0<=o;o--)try{I.installedPlugins[o].unpatch(this)}catch(M){this.sendSDKError(M)}if(this.lifeCycle.emit("destroy"),this.lifeCycle.clear(),e)t=this,n=Object.getOwnPropertyDescriptors(t),Object.keys(n).forEach(function(e){n[e].writable&&(t[e]=null)}),Object.setPrototypeOf(this,null);else{for(var i=this;i.constructor!==Object&&Nu(i,this),i=Object.getPrototypeOf(i););0===I.instances.length&&(r=Object.getPrototypeOf(this).constructor,Nu(r),Nu(I))}},I.version="1.36.6",I.instances=[],I.logType=T,I.environment=eu,I.installedPlugins=[],I),_u=Function,Du=s([].concat),Uu=s([].join),Fu={},lo=F?_u.bind:function(u){var a=pe(this),e=a.prototype,c=xo(arguments,1),s=function(){var e=Du(c,xo(arguments));if(this instanceof s){var t=a,n=e.length,r=e;if(!b(Fu,n)){for(var o=[],i=0;i<n;i++)o[i]="a["+i+"]";Fu[n]=_u("C,a","return new C("+Uu(o,",")+")")}return Fu[n](t,r)}return a.apply(u,e)};return l(e)&&(s.prototype=e),s};function I(e){var n,t,r,o,u,i,a,c,s,f,l,d,p,h,g,y=this;this.isGetSample=!1,this.isHidden=!1,this.config={version:0,delay:1e3,onError:!0,repeat:5,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,onClose:!0,reportLoadPackageSpeed:!0,hostUrl:"https://aegis.qq.com",env:"production",url:"",offlineUrl:"",whiteListUrl:"",pvUrl:"",speedUrl:"",customTimeUrl:"",performanceUrl:"",webVitalsUrl:"",eventUrl:"",setDataReportUrl:"",reportImmediately:!0},this.isWhiteList=!1,this.lifeCycle=new zi,this.bean={},this.originFireUrl="",this.normalLogPipeline=ku([Ru(this,5),Su,function(e,t){var r=n.config;t(e=e.map(function(e){var t,n=r.maxLength||102400;try{if(!e.msg||e.msg.length<=n)return e;e.msg=null==(t=e.msg)?void 0:t.substring(0,n)}catch(D){e.msg=fu(e.msg).substring(0,r.maxLength)}return e}))},(h=(n=this).config,g={},function(e,t){var n="number"==typeof h.repeat?h.repeat:5;if(0===n)return t(e);t(e.filter(function(e){return e.level!==T.ERROR&&e.level!==T.PROMISE_ERROR&&e.level!==T.AJAX_ERROR&&e.level!==T.SCRIPT_ERROR&&e.level!==T.IMAGE_ERROR&&e.level!==T.CSS_ERROR&&e.level!==T.MEDIA_ERROR||(g[e.msg]=g[e.msg]||0,g[e.msg]+=1,!(g[e.msg]>n))}))}),(d=this.lifeCycle.emit,p=this.config,function(e,t){var n,r=p.logCreated;return"function"==typeof r?(n=e.filter(function(e){return!1!==r(e)}),d("beforeWrite",n),t(n)):(d("beforeWrite",e),t(e))}),(l=this,setTimeout(function(){var e=l.config.pvUrl,n=void 0===e?"":e,e="undefined"!=typeof location?null===location||void 0===location?void 0:location.pathname:undefined;n&&e!==l.originFireUrl&&(l.sendPipeline([function(e,t){t({url:n,type:P.PV})}],P.PV)(null),e&&location&&(l.originFireUrl=e))},100),function(e,t){t(e)}),(s=c=a=!1,f=[],(u=this).lifeCycle.on("onConfigChange",function(){i&&clearTimeout(i),i=setTimeout(function(){var e,n;!s&&u.config&&(s=!0,e=u.config.whiteListUrl,(n=void 0===e?"":e)&&u.sendPipeline([function(e,t){t({url:n,type:P.WHITE_LIST,success:function(e){c=!0;try{var t=e.data||JSON.parse(e),n=t.retcode,r=t.result,o=void 0===r?{}:r,i=(0===n&&(a=o.is_in_white_list,u.isWhiteList=a,0<=o.rate&&o.rate<=1&&(u.config.random=o.rate,u.isGetSample=!1)),u.isWhiteList&&f.length?Iu(u)(f.splice(0),function(){}):!u.isWhiteList&&f.length&&(f.length=0),u.config.onWhitelist);"function"==typeof i&&i(a)}catch(m){}},fail:function(){c=!0}})}],P.WHITE_LIST)(null),s=!1)},u.config.uin?50:500)}),u.lifeCycle.on("destroy",function(){f.length=0}),function(e,t){var n;a||null!=(n=null==(n=u.config)?void 0:n.api)&&n.reportRequest?t(e.concat(f.splice(0)).map(function(e){return xu(e),e})):(n=e.filter(function(e){return e.level!==T.INFO&&e.level!==T.API_RESPONSE?(xu(e),!0):(c||(f.push(e),200<=f.length&&(f.length=200)),!1)})).length&&t(n)}),function(e,t){try{var n=JSON.parse(JSON.stringify(e)),r=(y.lifeCycle.emit("beforeReport",n),y.config.beforeReport);(e="function"==typeof r?e.filter(function(e){return!1!==r(e)}):e).length&&t(e)}catch(v){}},Iu(this)]),this.eventPipeline=ku([Ru(this,10),(o=this,function(e){o.sendPipeline([function(e,t){var n=e.map(function(e){return{name:e.name,ext1:e.ext1||o.config.ext1||"",ext2:e.ext2||o.config.ext2||"",ext3:e.ext3||o.config.ext3||""}});t({url:o.config.eventUrl+"?payload="+encodeURIComponent(JSON.stringify(n)),type:P.EVENT,log:e})}],P.EVENT)(e)})]),this.timeMap={},this.failRequestCount=0,this.customTimePipeline=ku([Ru(this,10),(r=this,function(e){return r.sendPipeline([function(e,t){t({url:r.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:e})),type:P.CUSTOM,log:e})}],P.CUSTOM)(e)})]),this.config=(t=this.config,void 0===(e=e.hostUrl)&&(e="https://aegis.qq.com"),t.url=t.url||e+"/collect",t.offlineUrl=t.offlineUrl||e+"/offline",t.whiteListUrl=t.whiteListUrl||e+"/collect/whitelist",t.pvUrl=t.pvUrl||e+"/collect/pv",t.eventUrl=t.eventUrl||e+"/collect/events",t.speedUrl=t.speedUrl||e+"/speed",t.customTimeUrl=t.customTimeUrl||e+"/speed/custom",t.performanceUrl=t.performanceUrl||e+"/speed/performance",t.webVitalsUrl=t.webVitalsUrl||e+"/speed/webvitals",t.setDataReportUrl=t.SetDataReportUrl||e+"/speed/miniProgramData",t),I.instances.push(this)}g({target:"Function",proto:!0,forced:Function.bind!==lo},{bind:lo});Qu.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},Qu.prototype.unpatch=function(e){var t=this.instances.indexOf(e);-1!==t&&(this.instances.splice(t,1),0===this.instances.length&&this.uninstall(e))},Qu.prototype.countInstance=function(){return this.instances.length},Qu.prototype.uninstall=function(e){var t;null!=(t=null==(t=this.option)?void 0:t.destroy)&&t.apply(this,[e])},Qu.prototype.walk=function(n){var r=this;this.instances.forEach(function(e){var t=r.canUse(e);t&&n(e,t)})},Qu.prototype.canUse=function(e){e=this.getConfig(e);return!(!e||"object"!==Eo(e))||!!e},Qu.prototype.getConfig=function(e){return null==(e=e.config)?void 0:e[this.name]},Qu.prototype.exist=function(e){return-1===this.instances.indexOf(e)},Qu.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,null!=(t=null==(t=this.option)?void 0:t.init)&&t.call(this.option,this.getConfig(e)))},Qu.prototype.triggerOnNewAegis=function(e){var t;null!=(t=null==(t=this.option)?void 0:t.onNewAegis)&&t.call(this.option,e,this.getConfig(e))};var L=Qu,ao=new L({name:"aid",aid:"",init:function(e){try{var t=!0!==e&&e||window.localStorage.getItem("AEGIS_ID");t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),window.localStorage.setItem("AEGIS_ID",t)),this.aid=t}catch(o){}},onNewAegis:function(e){e.bean.aid=this.aid,e.config.aid=this.aid}}),Mu=s(1..valueOf),y="\t\n\x0B\f\r                　\u2028\u2029\ufeff",Hu=s("".replace),u="["+y+"]",qu=RegExp("^"+u+u+"*"),Bu=RegExp(u+u+"*$"),h=function(t){return function(e){e=S(Z(e));return 1&t&&(e=Hu(e,qu,"")),e=2&t?Hu(e,Bu,""):e}},w={start:h(1),end:h(2),trim:h(3)},lo=xt.f,Wu=Me.f,Gu=$e.f,$u=w.trim,Vu=v.Number,Xu=Vu.prototype,Ju=v.TypeError,Ku=s("".slice),zu=s("".charCodeAt),Yu=function(e){var t,n,r,o,i,u,a,c=Ae(e,"number");if(se(c))throw Ju("Cannot convert a Symbol value to a number");if("string"==typeof c&&2<c.length)if(c=$u(c),43===(e=zu(c,0))||45===e){if(88===(t=zu(c,2))||120===t)return NaN}else if(48===e){switch(zu(c,1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(i=(o=Ku(c,2)).length,u=0;u<i;u++)if((a=zu(o,u))<48||r<a)return NaN;return parseInt(o,n)}return+c};function Qu(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}if(Nt("Number",!Vu(" 0o1")||!Vu("0b1")||Vu("+0x1"))){for(var Zu,ea=function(e){var e=arguments.length<1?0:Vu(function(e){e=Ae(e,"number");return"bigint"==typeof e?e:Yu(e)}(e)),t=this;return oe(Xu,t)&&c(function(){Mu(t)})?Nr(Object(e),t,ea):e},ta=d?lo(Vu):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),na=0;ta.length>na;na++)b(Vu,Zu=ta[na])&&!b(ea,Zu)&&Gu(ea,Zu,Wu(Vu,Zu));(ea.prototype=Xu).constructor=ea,st(v,"Number",ea,{constructor:!0})}var ra=RangeError,oa=String,ia=Math.floor,ua=s(E),aa=s("".slice),ca=s(1..toFixed),sa=function(e,t,n){return 0===t?n:t%2==1?sa(e,t-1,n*e):sa(e*e,t/2,n)},fa=function(e,t,n){for(var r=-1,o=n;++r<6;)o+=t*e[r],e[r]=o%1e7,o=ia(o/1e7)},la=function(e,t){for(var n=6,r=0;0<=--n;)r+=e[n],e[n]=ia(r/t),r=r%t*1e7},da=function(e){for(var t,n=6,r="";0<=--n;)""===r&&0!==n&&0===e[n]||(t=oa(e[n]),r=""===r?t:r+ua("0",7-t.length)+t);return r},u=c(function(){return"0.000"!==ca(8e-5,3)||"1"!==ca(.9,0)||"1.25"!==ca(1.255,2)||"1000000000000000128"!==ca(0xde0b6b3a7640080,0)})||!c(function(){ca({})}),pa=(g({target:"Number",proto:!0,forced:u},{toFixed:function(e){var t,n,r,o=Mu(this),e=pt(e),i=[0,0,0,0,0,0],u="",a="0";if(e<0||20<e)throw ra("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return oa(o);if(o<0&&(u="-",o=-o),1e-21<o)if(r=(t=function(){for(var e=0,t=o*sa(2,69,1);4096<=t;)e+=12,t/=4096;for(;2<=t;)e+=1,t/=2;return e}()-69)<0?o*sa(2,-t,1):o/sa(2,t,1),r*=4503599627370496,0<(t=52-t)){for(fa(i,0,r),n=e;7<=n;)fa(i,1e7,0),n-=7;for(fa(i,sa(10,n,1),0),n=t-1;23<=n;)la(i,1<<23),n-=23;la(i,1<<n),fa(i,1,1),la(i,2),a=da(i)}else fa(i,0,r),fa(i,1<<-t,0),a=da(i)+ua("0",e);return 0<e?u+((r=a.length)<=e?"0."+ua("0",e-r)+a:aa(a,0,r-e)+"."+aa(a,r-e)):u+a}}),["/collect/offlineAuto","/aegis-sdk","/flog.core.min.js"]),ha=function(t){var n;return t.payload?(n={},Object.keys(t).forEach(function(e){"payload"!==e&&(n[e]=t[e])}),n):t},ga=function(){return"undefined"!=typeof window.performance&&"function"==typeof performance.clearResourceTimings&&"function"==typeof performance.getEntriesByType&&"function"==typeof performance.now},ya=function(t){return pa.some(function(e){return-1<t.indexOf(e)})},va=new L({name:"reportAssetSpeed"}),h=va=new L({name:"reportAssetSpeed",collectCur:0,collectEntryType:"resource",ASSETS_INITIATOR_TYPE:["img","css","script","link","audio","video"],onNewAegis:function(e){var t=this;ga()&&(this.collectSuccessLog(e),this.collectFailLog(e),performance.onresourcetimingbufferfull=function(){t.collectCur=0,performance.clearResourceTimings()})},publish:function(t){this.$walk(function(e){e.speedLogPipeline(t)})},publishMany:function(e,t){for(var n=t.config,r=0,o=e.length;r<o;r++){var i=e[r];-1===this.ASSETS_INITIATOR_TYPE.indexOf(i.initiatorType)||ya(i.name)||this.publish(this.generateLog(i,n))}},collectSuccessLog:function(n){var e,t,r=this;"function"==typeof window.PerformanceObserver?(this.publishMany(performance.getEntriesByType(this.collectEntryType),n),(e=new window.PerformanceObserver(function(e){r.publishMany(e.getEntries(),n)})).observe({entryTypes:[this.collectEntryType]}),n.lifeCycle.on("destroy",function(){0===va.countInstance()&&e.disconnect()})):(t=setInterval(function(){var e=performance.getEntriesByType(r.collectEntryType),t=e.slice(r.collectCur);r.collectCur=e.length,r.publishMany(t,n)},3e3),n.lifeCycle.on("destroy",function(){0===va.countInstance()&&clearInterval(t)}))},collectFailLog:function(e){var r=this,o=e.config,t=function(e){var t,n;e&&(e=e.target||e.srcElement,!(t=(null==e?void 0:e.src)||(null==e?void 0:e.href))||"string"!=typeof t||-1<window.location.href.indexOf(t)||(e="function"==typeof(null==(e=o.api)?void 0:e.resourceTypeHandler)?null==(e=o.api)?void 0:e.resourceTypeHandler(t):"",n=performance.getEntriesByType(r.collectEntryType).find(function(e){return e.name===t}),ya(t)||(n={url:nu(t),status:400,duration:Number(((null==n?void 0:n.duration)||0).toFixed(2)),method:"get",type:e||"static",isHttps:ru(t),urlQuery:nu(t,!0),nextHopProtocol:"",domainLookup:0,connectTime:0},r.publish(n))))};window.document.addEventListener("error",t,!0),e.lifeCycle.on("destroy",function(){0===va.countInstance()&&window.document.removeEventListener("error",t,!0)})},generateLog:function(e,t){var n,t="function"==typeof(null==(n=t.api)?void 0:n.resourceTypeHandler)?null==(n=t.api)?void 0:n.resourceTypeHandler(e.name):"";return{url:nu(e.name),method:"get",duration:Number(e.duration.toFixed(2)),status:200,type:t||"static",isHttps:ru(e.name),nextHopProtocol:e.nextHopProtocol||"",urlQuery:nu(e.name,!0),domainLookup:tu(e.domainLookupEnd-e.domainLookupStart),connectTime:tu(e.connectEnd-e.connectStart)}},collectNotReportedLog:function(e){var t,n;ga()&&(t=(n=performance.getEntriesByType(this.collectEntryType)).length,"function"!=typeof window.PerformanceObserver&&this.collectCur!==t&&(n=n.slice(this.collectCur),this.collectCur=t,this.publishMany(n,e,!0)))},destroy:function(){this.option.publish=function(){}}}),ma=p.findIndex,ba=!0;"findIndex"in[]&&Array(1).findIndex(function(){ba=!1}),g({target:"Array",proto:!0,forced:ba},{findIndex:function(e){return ma(this,e,1<arguments.length?arguments[1]:undefined)}}),n("findIndex");var wa,Ea,lo=f("species"),Oa=TypeError,Ra=f("species"),E=/(?:ipad|iphone|ipod).*applewebkit/i.test(e),u=v.setImmediate,p=v.clearImmediate,Sa=v.process,xa=v.Dispatch,Ta=v.Function,n=v.MessageChannel,Pa=v.String,Ia=0,La={};try{wa=v.location}catch(_){}var Ca=function(e){var t;b(La,e)&&(t=La[e],delete La[e],t())},ja=function(e){return function(){Ca(e)}},C=function(e){Ca(e.data)},Aa=function(e){v.postMessage(Pa(e),wa.protocol+"//"+wa.host)};u&&p||(u=function(e){bu(arguments.length,1);var t=O(e)?e:Ta(e),n=xo(arguments,1);return La[++Ia]=function(){So(t,undefined,n)},Ea(Ia),Ia},p=function(e){delete La[e]},yu?Ea=function(e){Sa.nextTick(ja(e))}:xa&&xa.now?Ea=function(e){xa.now(ja(e))}:n&&!E?(Ha=(n=new n).port2,n.port1.onmessage=C,Ea=Ut(Ha.postMessage,Ha)):v.addEventListener&&O(v.postMessage)&&!v.importScripts&&wa&&"file:"!==wa.protocol&&!c(Aa)?(Ea=Aa,v.addEventListener("message",C,!1)):Ea="onreadystatechange"in De("script")?function(e){on.appendChild(De("script")).onreadystatechange=function(){on.removeChild(this),Ca(e)}}:function(e){setTimeout(ja(e),0)});var ka,Na,_a,Da,Ua,Fa,Ma,n={set:u,clear:p},Ha=/ipad|iphone|ipod/i.test(e)&&v.Pebble!==undefined,Aa=/web0s(?!.*chrome)/i.test(e),C=Me.f,qa=n.set,u=v.MutationObserver||v.WebKitMutationObserver,p=v.document,Ba=v.process,e=v.Promise,C=C(v,"queueMicrotask"),C=C&&C.value,Wa=(C||(ka=function(){var e,t;for(yu&&(e=Ba.domain)&&e.exit();Na;){t=Na.fn,Na=Na.next;try{t()}catch(_){throw Na?Da():_a=undefined,_}}_a=undefined,e&&e.enter()},Da=E||yu||Aa||!u||!p?!Ha&&e&&e.resolve?((E=e.resolve(undefined)).constructor=e,Ma=Ut(E.then,E),function(){Ma(ka)}):yu?function(){Ba.nextTick(ka)}:(qa=Ut(qa,v),function(){qa(ka)}):(Ua=!0,Fa=p.createTextNode(""),new u(ka).observe(Fa,{characterData:!0}),function(){Fa.data=Ua=!Ua})),C||function(e){e={fn:e,next:undefined};_a&&(_a.next=e),Na||(Na=e,Da()),_a=e}),Ga=function(e){try{return{error:!1,value:e()}}catch(_){return{error:!0,value:_}}},Aa=function(){this.head=null,this.tail=null},$a=(Aa.prototype={add:function(e){e={item:e,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},Aa),Va=v.Promise,Xa="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Ja=!Xa&&!yu&&"object"==typeof window&&"object"==typeof document;Va&&Va.prototype;var Ka,za,Ya,Qa=f("species"),Za=!1,ec=O(v.PromiseRejectionEvent),Ha={CONSTRUCTOR:Nt("Promise",function(){var e=rt(Va),t=e!==String(Va);if(!t&&66===ie)return!0;if(!ie||ie<51||!/native code/.test(e)){var e=new Va(function(e){e(1)}),n=function(e){e(function(){},function(){})};if((e.constructor={})[Qa]=n,!(Za=e.then(function(){})instanceof n))return!0}return!t&&(Ja||Xa)&&!ec}),REJECTION_EVENT:ec,SUBCLASSING:Za},tc=TypeError,nc=function(e){var n,r;this.promise=new e(function(e,t){if(n!==undefined||r!==undefined)throw tc("Bad Promise constructor");n=e,r=t}),this.resolve=pe(n),this.reject=pe(r)},rc={f:function(e){return new nc(e)}},oc=n.set,e=Ha.CONSTRUCTOR,ic=Ha.REJECTION_EVENT,E=Ha.SUBCLASSING,uc=at.getterFor("Promise"),ac=at.set,p=Va&&Va.prototype,cc=Va,sc=p,fc=v.TypeError,lc=v.document,dc=v.process,pc=rc.f,hc=pc,gc=!!(lc&&lc.createEvent&&v.dispatchEvent),yc=function(e){var t;return!(!l(e)||!O(t=e.then))&&t},vc=function(e,t){var n,r,o,i,u=t.value,a=1==t.state,c=a?e.ok:e.fail,s=e.resolve,f=e.reject,l=e.domain;try{c?(a||(2===t.rejection&&(i=t,m(oc,v,function(){var e=i.facade;yu?dc.emit("rejectionHandled",e):bc("rejectionhandled",e,i.value)})),t.rejection=1),!0===c?n=u:(l&&l.enter(),n=c(u),l&&(l.exit(),o=!0)),n===e.promise?f(fc("Promise-chain cycle")):(r=yc(n))?m(r,n,s,f):s(n)):f(u)}catch(_){l&&!o&&l.exit(),f(_)}},mc=function(n,o){n.notified||(n.notified=!0,Wa(function(){for(var e,r,t=n.reactions;e=t.get();)vc(e,n);n.notified=!1,o&&!n.rejection&&(r=n,m(oc,v,function(){var e,t=r.facade,n=r.value;if(wc(r)&&(e=Ga(function(){yu?dc.emit("unhandledRejection",n,t):bc("unhandledrejection",t,n)}),r.rejection=yu||wc(r)?2:1,e.error))throw e.value}))}))},bc=function(e,t,n){var r;gc?((r=lc.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),v.dispatchEvent(r)):r={promise:t,reason:n},!ic&&(t=v["on"+e])?t(r):"unhandledrejection"===e&&function(e,t){var n=v.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},wc=function(e){return 1!==e.rejection&&!e.parent},Ec=function(t,n,r){return function(e){t(n,e,r)}},Oc=function(e,t,n){e.done||(e.done=!0,(e=n?n:e).value=t,e.state=2,mc(e,!0))},Rc=function(t,n,e){if(!t.done){t.done=!0,e&&(t=e);try{if(t.facade===n)throw fc("Promise can't be resolved itself");var r=yc(n);r?Wa(function(){var e={done:!1};try{m(r,n,Ec(Rc,e,t),Ec(Oc,e,t))}catch(_){Oc(e,_,t)}}):(t.value=n,t.state=1,mc(t,!1))}catch(_){Oc({done:!1},_,t)}}};if(e&&(sc=(cc=function(e){Er(this,sc),pe(e),m(Ka,this);var t=uc(this);try{e(Ec(Rc,t),Ec(Oc,t))}catch(_){Oc(t,_)}}).prototype,(Ka=function(e){ac(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new $a,rejection:!1,state:0,value:undefined})}).prototype=st(sc,"then",function(e,t){var n=uc(this),r=pc(function(e,t){var n,e=R(e).constructor;if(e===undefined||Y(n=R(e)[Ra]))return t;e=n;if(Yt(e))return e;throw Oa(le(e)+" is not a constructor")}(this,cc));return n.parent=!0,r.ok=!O(e)||e,r.fail=O(t)&&t,r.domain=yu?dc.domain:undefined,0==n.state?n.reactions.add(r):Wa(function(){vc(r,n)}),r.promise}),za=function(){var e=new Ka,t=uc(e);this.promise=e,this.resolve=Ec(Rc,t),this.reject=Ec(Oc,t)},rc.f=pc=function(e){return e===cc||void 0===e?new za:hc(e)},O(Va)&&p!==Object.prototype)){Ya=p.then,E||st(p,"then",function(e,t){var n=this;return new cc(function(e,t){m(Ya,n,e,t)}).then(e,t)},{unsafe:!0});try{delete p.constructor}catch(_){}Un&&Un(p,sc)}g({global:!0,constructor:!0,wrap:!0,forced:e},{Promise:cc}),An(cc,"Promise",!1),u=re("Promise"),C=$e.f,d&&u&&!u[lo]&&C(u,lo,{configurable:!0,get:function(){return this}});var Aa=Ha.CONSTRUCTOR||!r(function(e){Va.all(e).then(undefined,function(){})}),n=(g({target:"Promise",stat:!0,forced:Aa},{all:function(e){var a=this,t=rc.f(a),c=t.resolve,s=t.reject,n=Ga(function(){var r=pe(a.resolve),o=[],i=0,u=1;br(e,function(e){var t=i++,n=!1;u++,m(r,a,e).then(function(e){n||(n=!0,o[t]=e,--u||c(o))},s)}),--u||c(o)});return n.error&&s(n.value),t.promise}}),Ha.CONSTRUCTOR),E=Va&&Va.prototype,e=(g({target:"Promise",proto:!0,forced:n,real:!0},{"catch":function(e){return this.then(undefined,e)}}),O(Va)&&(p=re("Promise").prototype["catch"],E["catch"]!==p&&st(E,"catch",p,{unsafe:!0})),g({target:"Promise",stat:!0,forced:Aa},{race:function(e){var n=this,r=rc.f(n),o=r.reject,t=Ga(function(){var t=pe(n.resolve);br(e,function(e){m(t,n,e).then(r.resolve,o)})});return t.error&&o(t.value),r.promise}}),g({target:"Promise",stat:!0,forced:Ha.CONSTRUCTOR},{reject:function(e){var t=rc.f(this);return m(t.reject,undefined,e),t.promise}}),Ha.CONSTRUCTOR),Sc=(re("Promise"),g({target:"Promise",stat:!0,forced:e},{resolve:function(e){return e=e,R(t=this),l(e)&&e.constructor===t?e:((0,(t=rc.f(t)).resolve)(e),t.promise);var t}}),window.navigator.userAgent.toLowerCase()),j={},A=function(e){return-1!==Sc.indexOf(e)};j.macos=function(){return A("mac")},j.ios=function(){return j.iphone()||j.ipod()||j.ipad()},j.iphone=function(){return!j.windows()&&A("iphone")},j.ipod=function(){return A("ipod")},j.ipad=function(){var e="MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;return A("ipad")||e},j.android=function(){return!j.windows()&&A("android")},j.androidPhone=function(){return j.android()&&A("mobile")},j.androidTablet=function(){return j.android()&&!A("mobile")},j.blackberry=function(){return A("blackberry")||A("bb10")},j.blackberryPhone=function(){return j.blackberry()&&!A("tablet")},j.blackberryTablet=function(){return j.blackberry()&&A("tablet")},j.windows=function(){return A("windows")},j.windowsPhone=function(){return j.windows()&&A("phone")},j.windowsTablet=function(){return j.windows()&&A("touch")&&!j.windowsPhone()},j.fxos=function(){return(A("(mobile")||A("(tablet"))&&A(" rv:")},j.fxosPhone=function(){return j.fxos()&&A("mobile")},j.fxosTablet=function(){return j.fxos()&&A("tablet")},j.meego=function(){return A("meego")},j.cordova=function(){return window.cordova&&"file:"===location.protocol},j.nodeWebkit=function(){return"object"===Eo(window.process)},j.mobile=function(){return j.androidPhone()||j.iphone()||j.ipod()||j.windowsPhone()||j.blackberryPhone()||j.fxosPhone()||j.meego()},j.tablet=function(){return j.ipad()||j.androidTablet()||j.blackberryTablet()||j.windowsTablet()||j.fxosTablet()},j.desktop=function(){return!j.tablet()&&!j.mobile()};var xc,Tc,Pc,Ic,Lc,Cc,jc,Ac=!(j.isIE=function(){return"ActiveXObject"in window}),kc=[],Nc=!1,_c=[],Dc=function(r,e,o){return null!=e&&e.length&&"object"===Eo(r)?e.reduce(function(e,t){var n=r instanceof Headers?r.get(t):r[t];return n?e+(""===e?"\n":"\n\n")+o+" header "+t+": "+n:e},""):""},Uc={sw8:function(e){e=e.split("-")[1];return e?atob(e):""},traceparent:function(e){return e.split("-")[1]},"sentry-trace":function(e){return e.split("-")[0]}},Fc=function(e){var t,n="";return"object"===Eo(e)&&(t=(e=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],o=e[r]||"function"==typeof e.get&&e.get(r);if(o)return[r,o]}return["",""]}(e,Object.keys(Uc)))[0],e=e[1],t&&(n=Uc[t](e))),n},u=(new L({name:"reportApiSpeed"}),new L({name:"reportApiSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideFetch(e.config),this.overrideXhr(e.config))},getRequestType:function(e,t,n){void 0===t&&(t="");var r,o,e="function"==typeof(null==(o=e.api)?void 0:o.resourceTypeHandler)?null==(o=e.api)?void 0:o.resourceTypeHandler(n):"";return"fetch"===e&&"static"===e||(r=void 0===t?"":t,o=(void 0===n?"":n).split("?")[0],e=iu.test(o)||ou.some(function(e){return-1!==String(r).indexOf(e)})?"static":"fetch"),e},overrideFetch:function(h){var g=this,e={name:this.name,then:function(s,f,l,d){var e,p;h.hostUrl&&-1<l.indexOf(h.hostUrl)||(e=s.headers?s.headers.get("content-type"):"",e=g.getRequestType(h,e,s.url),p={url:s.url,isHttps:ru(s.url),method:(null==d?void 0:d.method)||"get",duration:f,type:e,nextHopProtocol:"",status:s.status||0},"fetch"===e?s.clone().text().then(function(e){var t=s.status<=0||400<=s.status,n=(null==(n=h.api)?void 0:n.reqHeaders)||[],n=Dc(null==d?void 0:d.headers,n,"req"),r=(null==(r=h.api)?void 0:r.resHeaders)||[],r=Dc(s.headers,r,"res"),o=Fc(null==d?void 0:d.headers),i=au(e,h.api,{url:l,ctx:s,payload:null==d?void 0:d.body}),u=i.code,i=i.isErr,a=null==(a=h.api)?void 0:a.apiDetail,c=a?cu(null==d?void 0:d.body,null==(c=h.api)?void 0:c.reqParamHandler,{url:l}):"",a=a?cu(e,null==(a=h.api)?void 0:a.resBodyHandler,{url:l,ctx:s}):"",e=(t?"FETCH_ERROR: "+e+" \n\n":"")+"fetch req url: "+l+" \n                                \nres status: "+(s.status||0)+" \n                                \nres duration: "+f+"ms \n                                \nreq method: "+((null==d?void 0:d.method)||"get")+" \n                                \nres retcode: "+u+"\n                                \nreq param: "+c+"\n                                \nres data: "+a+"\n                                "+n+"\n                                "+r;p.payload=null==d?void 0:d.body,p.ret=u,p.isErr=+i,g.publishNormalLog({msg:e,level:t?T.AJAX_ERROR:i?T.RET_ERROR:T.API_RESPONSE,code:u,trace:o}),g.publishSpeed(p)}):(Object.assign(p,{type:"static",urlQuery:nu(s.url,!0),domainLookup:Ki.number,connectTime:Ki.number}),g.publishSpeed(p)))},"catch":function(e,t,n,r){var o,i,u;if(!(h.hostUrl&&-1<n.indexOf(h.hostUrl)))throw o=g.getRequestType(h,"",n),o={url:n,isHttps:ru(n),method:(null==r?void 0:r.method)||"get",duration:t,nextHopProtocol:"",type:o,status:0},g.publishSpeed(o),o=(null==(o=h.api)?void 0:o.reqHeaders)||[],o=Dc(null==r?void 0:r.headers,o,"req"),i=Fc(null==r?void 0:r.headers),u=null!=(u=h.api)&&u.apiDetail?cu(null==r?void 0:r.body,null==(u=h.api)?void 0:u.reqParamHandler,{url:n}):"",n="AJAX_ERROR: "+e+"\n                          \nreq url: "+n+"\n                          \nres status: 0\n                          \nres duration: "+t+"ms\n                          \nreq method: "+((null==r?void 0:r.method)||"get")+"\n                          \nreq param:"+u+"\n                          "+o,g.publishNormalLog({msg:n,level:T.AJAX_ERROR,code:-400,trace:i}),e}},t=(this.hackFetchOptions=e,this.hackFetchOptions);if(_c.find(function(e){return e.name===t.name}))throw new Error("name '"+t.name+"' is already in hackFetch option list");_c.push(t),!Nc&&window.fetch&&(Nc=!0,Ic=window.fetch,window.fetch=function(e,r){void 0===r&&(r={});for(var o="string"==typeof e?e:e.url,t=0;t<_c.length;t++){var n=_c[t];try{"function"==typeof n.beforeFetch&&n.beforeFetch(o,r)}catch(c){}}var i=Date.now();return Ic(e,r).then(function(e){for(var t=0;t<_c.length;t++){var n=_c[t];try{"function"==typeof n.then&&n.then(e,Date.now()-i,o,r)}catch(c){}}return e})["catch"](function(e){for(var t=0;t<_c.length;t++){var n=_c[t];try{"function"==typeof n["catch"]&&n["catch"](e,Date.now()-i,o,r)}catch(c){}}throw e})})},overrideXhr:function(S){var t,x=this,e={name:this.name,send:function(E,O){var R=Date.now();E.addEventListener("loadend",function(){var e,r=E.aegisUrl||"";if(r&&!(S.hostUrl&&-1<r.indexOf(S.hostUrl))){var o="",i=((E.failType||!E.status||400<=E.status)&&(o=E.failType||"failed"),Date.now()-R),t=E.getResponseHeader("content-type"),t=x.getRequestType(S,t,r),u={url:r,isHttps:ru(r),status:E.status||0,method:E.aegisMethod||"get",type:t,nextHopProtocol:"",duration:i};if("fetch"===t){var t=(null==(t=S.api)?void 0:t.reqHeaders)||[],a=Dc(E.aegisXhrReqHeader,t,"req"),t=(null==(t=S.api)?void 0:t.resHeaders)||[],n=E.getAllResponseHeaders().split("\r\n").reduce(function(e,t){t=t.split(": ");return t[0]&&t[1]&&(e[t[0]]=t[1]),e},{}),c=Dc(n,t,"res"),s=Fc(E.aegisXhrReqHeader),t=null==(n=S.api)?void 0:n.apiDetail,f=t?cu(O,null==(n=S.api)?void 0:n.reqParamHandler,{url:r}):"",l=t?cu(E.response,null==(e=S.api)?void 0:e.resBodyHandler,{url:r}):"";try{var d,p,h,g,y=E.response,v=S.api,m={url:r,ctx:E,payload:O},b=function(e){var t=e.code,e=e.isErr,n=(o?"AJAX_ERROR: request "+o+" \n\n":"")+"fetch req url: "+r+" \n                    \nres status: "+u.status+"\n                    \nres duration: "+i+"ms\n                    \nreq method: "+u.method+"\n                    \nres retcode: "+t+"\n                    \nreq param: "+f+"\n                    \nres data: "+l+"\n                    "+a+"\n                    "+c;u.ret=t,u.isErr=+e,u.payload=O,x.publishNormalLog({msg:n,level:o?T.AJAX_ERROR:e?T.RET_ERROR:T.API_RESPONSE,code:t,trace:s}),x.publishSpeed(u)};try{if("function"==typeof(null==v?void 0:v.retCodeHandlerAsync))return void v.retCodeHandlerAsync(y,null==m?void 0:m.url,null==m?void 0:m.ctx,function(e){var t=e.code,e=e.isErr;null!=b&&b({code:void 0===t?"unknown":t,isErr:e})});if("function"==typeof(null==v?void 0:v.retCodeHandler))return void(h=(p=v.retCodeHandler(y,null==m?void 0:m.url,null==m?void 0:m.ctx,null==m?void 0:m.payload)||{}).code,g=p.isErr,null!=b&&b({code:void 0===h?"unknown":h,isErr:g}));"string"==typeof y&&(y=JSON.parse(y)),"function"==typeof(null==(d=null==v?void 0:v.ret)?void 0:d.join)&&(uu=[].concat(v.ret.map(function(e){return e.toLowerCase()})));var w=Object.getOwnPropertyNames(y).filter(function(e){return-1!==uu.indexOf(e.toLowerCase())});if(w.length)return void(h=y[w[0]],null!=b&&b({code:""+h,isErr:0!==h&&"0"!==h}));null!=b&&b({code:"unknown",isErr:!1})}catch(e){null!=b&&b({code:"unknown",isErr:!1})}}catch(z){u.ret="unknown",x.publishSpeed(u)}}else Object.assign(u,{type:"static",urlQuery:nu(r,!0),domainLookup:Ki.number,connectTime:Ki.number}),x.publishSpeed(u)}}),E.addEventListener("timeout",function(){E.failType="timeout"}),E.addEventListener("error",function(){E.failType="error"}),E.addEventListener("abort",function(){E.failType="abort"})}};this.hackXHROptions=e,t=this.hackXHROptions,kc.find(function(e){return e.name===t.name})||(kc.push(t),!Ac&&window.XMLHttpRequest&&(xc=window.XMLHttpRequest.prototype.send,Tc=window.XMLHttpRequest.prototype.open,Pc=window.XMLHttpRequest.prototype.setRequestHeader,Ac=!0,window.XMLHttpRequest.prototype.open=function(){if(this.aegisMethod=arguments[0],this.aegisUrl=arguments[1],this.aegisXhrStartTime=Date.now(),this.sendByAegis)j.isIE()||(this.timeout=5e3);else for(var e=0;e<kc.length;e++){var t=kc[e];try{"function"==typeof t.open&&t.open(this)}catch(x){}}return Tc.apply(this,arguments)},window.XMLHttpRequest.prototype.setRequestHeader=function(){var e=arguments[0],t=arguments[1];return this.aegisXhrReqHeader=this.aegisXhrReqHeader||{},this.aegisXhrReqHeader[e]=t,Pc.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(){if(!this.sendByAegis)for(var e=0;e<kc.length;e++){var t=kc[e];try{"function"==typeof t.send&&t.send(this,arguments[0])}catch(x){}}return xc.apply(this,arguments)}))},publishSpeed:function(n){var r=this;this.$walk(function(e){var t=r.$getConfig(e);"fetch"===n.type&&t&&"function"==typeof t.urlHandler?e.speedLogPipeline(x(x({},n),{url:nu(t.urlHandler(n.url,n.payload))})):(n.url=nu(n.url),e.speedLogPipeline(n))})},publishNormalLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})},destroy:function(){var t,n,e;this.option.publishSpeed=function(){},this.option.publishNormalLog=function(){},this.option.hackXHROptions&&(t=this.option.hackXHROptions,-1!==(e=kc.findIndex(function(e){return e.name===t.name}))&&kc.splice(e,1),window.XMLHttpRequest.prototype.send=xc,window.XMLHttpRequest.prototype.open=Tc,window.XMLHttpRequest.prototype.setRequestHeader=Pc,Ac=!1),this.option.hackFetchOptions&&(n=this.option.hackFetchOptions,-1!==(e=_c.findIndex(function(e){return e.name===n.name}))&&_c.splice(e,1),window.fetch=Ic,Nc=!1),this.option.override=!1}})),Mc={},lo=new L({name:"reportBridgeSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideBridge(e))},publishSpeed:function(t){this.$walk(function(e){e.speedLogPipeline(t)})},overrideBridge:function(e){var c=this,s=e.config;s.reportBridgeSpeed&&s.h5Bridge&&s.h5BridgeFunc.length&&s.h5BridgeFunc.forEach(function(e){var a=s.h5Bridge[e];Mc[e]=a,s.h5Bridge[e]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],o=e[1],n=e[2],i=e[3],u=Date.now();a(r,o,n,function(e){var t=au(e,s.api),n=t.code,t=t.isErr,n={url:r+"-"+o,name:r+"-"+o,duration:Date.now()-u,type:"bridge",ret:n,isErr:+t};c.publishSpeed(n),i(e)})}})},unHackBridge:function(t){Object.keys(Mc).forEach(function(e){Mc[e]&&(t.config.h5Bridge[e]=Mc[e])}),Mc={}},destroy:function(e){this.option.publishSpeed=function(){},this.option.unHackBridge(e),this.option.override=!1}});B("match",function(r,a,c){return[function(e){var t=Z(this),n=Y(e)?undefined:he(e,r);return n?m(n,e,t):new RegExp(e)[r](S(t))},function(e){var t=R(this),n=S(e),e=c(a,t,n);if(e.done)return e.value;if(!t.global)return Ni(t,n);for(var r=t.unicode,o=[],i=t.lastIndex=0;null!==(u=Ni(t,n));){var u=S(u[0]);""===(o[i]=u)&&(t.lastIndex=Ti(n,mt(t.lastIndex),r)),i++}return 0===i?null:o}]}),(C=Lc=Lc||{})[C.unknown=100]="unknown",C[C.wifi=1]="wifi",C[C.net2g=2]="net2g",C[C.net3g=3]="net3g",C[C.net4g=4]="net4g",C[C.net5g=5]="net5g",C[C.net6g=6]="net6g",(r=Cc=Cc||{})[r.android=1]="android",r[r.ios=2]="ios",r[r.windows=3]="windows",r[r.macos=4]="macos",r[r.linux=5]="linux",r[r.other=100]="other",(n=jc=jc||{})[n.unknown=100]="unknown",n[n.normal=0]="normal",n[n.weak=1]="weak",n[n.disconnected=2]="disconnected";var Hc,qc,Bc,Wc,Gc,$c,Vc,Xc,Jc,Kc,zc,Yc,Qc,Zc,E=new L({name:"device",onNewAegis:function(e){e.extendBean("platform",this.getPlatform()),e.extendBean("netType",Lc.unknown),this.getDpi(e),this.refreshNetworkTypeToBean(e),this.refreshNetworkStatusToBean(e)},getDpi:function(e){e.extendBean("vp",Math.round(window.innerWidth)+" * "+Math.round(window.innerHeight)),window.screen&&e.extendBean("sr",Math.round(window.screen.width)+" * "+Math.round(window.screen.height))},getPlatform:function(){var t={android:/\bAndroid\s*([^;]+)/,ios:/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,windows:/\b(Windows NT)/,macos:/\b(Mac OS)/,linux:/\b(Linux)/i},e=Object.keys(t).find(function(e){return t[e].test(navigator.userAgent)});return e?Cc[e]:Cc.other},refreshNetworkTypeToBean:function(t){var n=this,e=t.config;e&&("function"==typeof e.getNetworkType?e.getNetworkType:es)(function(e){Lc[e]||(e=Lc.unknown),t.extendBean("netType",e),n.NetworkRefreshTimer=setTimeout(function(){n.refreshNetworkTypeToBean(t),clearTimeout(n.NetworkRefreshTimer)},1e4)})},refreshNetworkStatusToBean:function(t){var e,n=this,r=t.config;!r||null!=(e="function"==typeof r.getNetworkStatus?r.getNetworkStatus:e)&&e(function(e){jc[e]===undefined&&(e=jc.unknown),t.extendBean("netStatus",e),n.NetworkStatusRefreshTimer=setTimeout(function(){n.refreshNetworkStatusToBean(t),clearTimeout(n.NetworkStatusRefreshTimer)},1e4)})}}),es=function(e){var t="",n=navigator.userAgent.match(/NetType\/(\w+)/);n?t=n[1]:navigator.connection&&(t=navigator.connection.effectiveType||navigator.connection.type),e((n=t=t||"unknown",0<=(n=String(n).toLowerCase()).indexOf("4g")?Lc.net4g:0<=n.indexOf("wifi")?Lc.wifi:0<=n.indexOf("5g")?Lc.net5g:0<=n.indexOf("6g")?Lc.net6g:0<=n.indexOf("3g")?Lc.net3g:0<=n.indexOf("2g")?Lc.net2g:Lc.unknown))},ts=window.WebSocket,ns=[],rs={construct:function(e,t){var u=new e(t[0],t[1]);return u.originSend=u.send,u.addEventListener("error",function(e){var e=(null==e?void 0:e.currentTarget)||{},t=e.url,n=e.readyState;null!=ns&&ns.forEach(function(e){e=e.onErr;null!=e&&e({msg:"无法获知具体错误信息，需在浏览器控制台查看！",readyState:n,connectUrl:t})})}),Object.defineProperty(u,"send",{get:function(){return function(e){null!=(t=u.originSend)&&t.call(u,e);var e=u.readyState,t=WebSocket.OPEN,n=WebSocket.CLOSED,r=WebSocket.CONNECTING,o=WebSocket.CLOSING;if(e!==t){var i={readyState:e,connectUrl:u.url};switch(e){case n:ns.forEach(function(e){e=e.sendErr;null!=e&&e(x({msg:"消息发送失败，连接已关闭！"},i))});break;case r:ns.forEach(function(e){(0,e.sendErr)(x({msg:"消息发送失败，正在连接中！"},i))});break;case o:ns.forEach(function(e){(0,e.sendErr)(x({msg:"消息发送失败，连接正在关闭！"},i))})}}}}}),u}},os=new L({name:"onError"}),p=os=new L({name:"onError",onNewAegis:function(e){this.startListen(e)},startListen:function(e){var t,n,r,o=this,i=window.onerror,u=(window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.publishErrorLog({msg:(fu(e[0])||"")+" @ ("+(fu(e[1])||"")+":"+(e[2]||0)+":"+(e[3]||0)+")\n          \n"+fu(e[4]||""),level:T.ERROR}),null!=i&&i.call.apply(i,ii([window],e))},function(e){e=e&&fu(e.reason);o.publishErrorLog({msg:"PROMISE_ERROR: "+e,level:T.PROMISE_ERROR})}),a=(window.addEventListener("unhandledrejection",u),function(e){e=(null==e?void 0:e.target)||(null==e?void 0:e.srcElement);if(e){var t=e.src||e.href,e=e.tagName;if("string"==typeof t&&e&&!(-1<window.location.href.indexOf(t))){var n={msg:e+" load fail: "+t,level:T.INFO};if(/\.js$/.test(t))n.level=T.SCRIPT_ERROR;else if(/\.css$/.test(t))n.level=T.CSS_ERROR;else switch(e.toLowerCase()){case"script":n.level=T.SCRIPT_ERROR;break;case"link":n.level=T.CSS_ERROR;break;case"img":n.level=T.IMAGE_ERROR;break;case"audio":case"video":n.level=T.MEDIA_ERROR;break;default:return}o.publishErrorLog(n)}}});window.document.addEventListener("error",a,!0),e.lifeCycle.on("destroy",function(){0===os.countInstance()&&(window.document.removeEventListener("unhandledrejection",u),window.document.removeEventListener("error",a,!0))}),e.config.websocketHack&&(e={key:e.config.id+"-"+this.name,onErr:function(e){var t;null!=(t=o.publishWsErrorLog)&&t.call(o,e)},sendErr:function(e){var t;null!=(t=o.publishWsErrorLog)&&t.call(o,e)}},this.hackWebsocketConfig=e,e=this.hackWebsocketConfig,window.Proxy&&window.WebSocket&&(t=window.WebSocket,window&&!t.isHack&&(n=new Proxy(WebSocket,rs),t.isHack=!0,window.WebSocket=n),r=e,ns.find(function(e){return e.key===r.key})||r&&ns.push(r)))},publishErrorLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})},publishWsErrorLog:function(e){var t=e.connectUrl,n=e.msg,e=e.readyState;this.publishErrorLog({msg:"WEBSOCKET_ERROR: \n              connect: "+t+"\n              readyState: "+e+"\n              msg: "+n,level:T.WEBSOCKET_ERROR})},destroy:function(){var t,e;this.option.publishErrorLog=function(){},this.option.hackWebsocketConfig&&(t=this.option.hackWebsocketConfig,window.WebSocket=ts,-1!==(e=ns.findIndex(function(e){return e.key===t.key}))&&ns.splice(e,1))}}),is=(new L({name:"pagePerformance"}),function(e,t,n,r){return void 0===n&&(n=3e4),void 0===r&&(r=0),(t=void 0===t?0:t)<=e&&e<=n?e:r}),Aa=new L({name:"pagePerformance",onNewAegis:function(e){ga()&&(Hc?this.publish(Hc,e):this.startCalcPerformance(e))},publish:function(e,u){var a=this;u.sendPipeline([function(e,t){var n,r=[];for(n in e)r.push(n+"="+e[n]);var o,i=a.$getConfig(u);if(i)return o=-1===u.config.performanceUrl.indexOf("?")?"?":"&","function"==typeof i.urlHandler?t({url:u.config.performanceUrl+o+r.join("&")+"&from="+(encodeURIComponent(i.urlHandler())||window.location.href),beanFilter:["from"],type:P.PERFORMANCE,log:e}):t({url:u.config.performanceUrl+o+r.join("&"),type:P.PERFORMANCE,log:e})}],P.PERFORMANCE)(e)},startCalcPerformance:function(n){var r=this;try{this.getFirstScreenTiming(n,function(e){var t=performance.timing;t&&(Hc={dnsLookup:is(t.domainLookupEnd-t.domainLookupStart),tcp:is(t.connectEnd-t.connectStart),ssl:is(0===t.secureConnectionStart?0:t.requestStart-t.secureConnectionStart),ttfb:is(t.responseStart-t.requestStart),contentDownload:is(t.responseEnd-t.responseStart),domParse:is(t.domInteractive-t.domLoading,0,3e4,1070),resourceDownload:is(t.loadEventStart-t.domInteractive,0,3e4,1070),firstScreenTiming:is(Math.floor(e),0,6e4)},(t=n.config).extraPerformanceData&&"{}"!==JSON.stringify(t.extraPerformanceData)&&(t=(e=t.extraPerformanceData).engineInit,e=e.bundleLoad,Hc=x(x({},Hc),{engineInit:is(t,0,1e4),bundleLoad:is(e,0,1e4)})),r.publish(Hc,n))})}catch(o){}},getFirstScreenTiming:function(e,t){null!=t&&t(0)},isEleInArray:function(e,t){return!(!e||e===document.documentElement)&&(-1!==t.indexOf(e)||this.isEleInArray(e.parentElement,t))},isInFirstScreen:function(e){var t,n;return!(!e||"function"!=typeof e.getBoundingClientRect)&&(e=e.getBoundingClientRect(),t=window.innerHeight,n=window.innerWidth,0<=e.left&&e.left<n&&0<=e.top&&e.top<t&&0<e.width&&0<e.height)},walkAndCount:function(e){var t=0;if(e&&1===e.nodeType){t+=1;var n=e.children;if(null!=n&&n.length)for(var r=0;r<n.length;r++)t+=this.walkAndCount(n[r])}return t}}),us=($c={passive:!0,capture:!0},Vc=new Date,Ha=function(){Gc=[],Bc=-1,qc=null,zc(addEventListener)},Xc=function(e,t){qc||(qc=t,Bc=e,Wc=new Date,zc(removeEventListener),Jc())},Jc=function(){var t;0<=Bc&&Bc<Wc-Vc&&(t={entryType:"first-input",name:qc.type,target:qc.target,cancelable:qc.cancelable,startTime:qc.timeStamp,processingStart:qc.timeStamp+Bc},Gc.forEach(function(e){e(t)}),Gc=[])},Kc=function(e){var t,n,r,o,i,u;e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,"pointerdown"==e.type?(n=t,r=e,o=function(){Xc(n,r),u()},i=function(){u()},u=function(){removeEventListener("pointerup",o,$c),removeEventListener("pointercancel",i,$c)},addEventListener("pointerup",o,$c),addEventListener("pointercancel",i,$c)):Xc(t,e))},zc=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,Kc,$c)})},Yc="hidden"===document.visibilityState?0:1/0,addEventListener("visibilitychange",function U(e){"hidden"===document.visibilityState&&(Yc=e.timeStamp,removeEventListener("visibilitychange",U,!0))},!0),Ha(),self.webVitals={firstInputPolyfill:function(e){Gc.push(e),Jc()},resetFirstInputPolyfill:Ha,get firstHiddenTime(){return Yc}},new L({name:"webVitals"}),0),k=(oi(Zc=N,e=Qc=a),Zc.prototype=null===e?Object.create(e):(hs.prototype=e.prototype,new hs),N.prototype.getBean=function(t){var n=this;return void 0===t&&(t=[]),""+Object.getOwnPropertyNames(this.bean).filter(function(e){return-1===t.indexOf(e)}).map(function(e){return"from"===e?"from="+n.getCurrentPageUrl():e+"="+n.bean[e]}).join("&")},N.prototype.getCurrentPageUrl=function(){var e=this.config.pageUrl||location.href,e=(e="function"==typeof this.config.urlHandler?this.config.urlHandler():e).slice(0,2048);return encodeURIComponent(e)},N.prototype.ready=function(){var t=this;!function N(){var e,n,r,o;t.reportRequestQueue.length&&(e=t.reportRequestQueue.splice(0,1)[0],n=e.options,r=e.success,o=e.fail,t.$request(n,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return null==r?void 0:r.apply(n,e)}finally{N()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return null==o?void 0:o.apply(n,e)}finally{N()}}))}(),this.isReportReady=!0},N.prototype.request=function(e,t,n){this.config.reportImmediately||this.isReportReady?this.$request(e,t,n):this.reportRequestQueue.push({options:e,success:t,fail:n})},N.prototype.$request=function(e,t,n){var r,o,i,u;if(e&&"string"==typeof e.url&&""!==e.url&&this.bean.id)return u=e.url,!1!==e.addBean&&(u=u+(-1===u.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),e.url=u,u=e.method||"get",(e=(o=this.config.onBeforeRequest)?o(e,this):e)?e.url?void((null!=e&&e.sendBeacon||this.sendNow)&&"function"==typeof(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)?navigator.sendBeacon(e.url,e.data):((r=new XMLHttpRequest).sendByAegis=!0,r.addEventListener("readystatechange",function(){4===r.readyState&&(400<=r.status||0===r.status?null!=n&&n(r.response):null!=t&&t(r.response))}),"get"===u.toLocaleLowerCase()?(r.open("get",(o=e.url,i=e.data,"string"!=typeof o?"":"object"===Eo(i)&&i?(u=Object.getOwnPropertyNames(i).map(function(e){var t=i[e];return e+"="+("string"==typeof t?encodeURIComponent(t):encodeURIComponent(JSON.stringify(t)))}).join("&").replace(/eval/gi,"evaI"),o+(-1===o.indexOf("?")?"?":"&")+u):o)),r.send()):(r.open("post",e.url),e.contentType&&r.setRequestHeader("Content-Type",e.contentType),"string"==typeof e.data&&(e.data=e.data.replace(/eval/gi,"evaI")),r.send(e.data)))):console.warn("Please handle the parameters reasonably, options.url is necessary"):console.warn("Sending request blocked")},N.useAsyncPlugin=function(u,e){var a,c=void 0===(a=(e=void 0===e?{}:e).exportsConstructor)?"aegis-plugin-"+us:a,t=e.onAegisInit,s=void 0===t?function(){}:t,t=e.onAegisInitAndPluginLoaded,f=void 0===t?function(){}:t;if(us+=1,"string"!=typeof u)throw new TypeError("useAsyncPlugin first param must be string");if("function"!=typeof s||"function"!=typeof f)throw new TypeError("onAegisInit and onAegisInitAndPluginLoaded must be function");this.use(new L({name:"asyncPlugin",onNewAegis:function(t){try{s(t),N.asyncPlugin[u]?f(t,window[N.asyncPlugin[u]]):(e=u,n=c,r=function(e){e||(N.asyncPlugin[u]=c,e=window[c],f(t,e))},o=document.createElement("script"),i=document.head,"function"==typeof n&&(r=n,n=""),o.src=e,o.setAttribute("name",n),o.name=n,o.setAttribute("crossorigin","anonymous"),o.crossorigin="anonymous",o.defer=!0,o.hasLoaded=!1,o.onreadystatechange=function(){o.hasLoaded||o.readyState&&"loaded"!==o.readyState&&"complete"!==o.readyState||(o.hasLoaded=!0,"function"==typeof r&&r(!1),setTimeout(function(){i.contains(o)&&i.removeChild(o)}))},o.onload=o.onreadystatechange,o.onerror=function(){"function"==typeof r&&r(!0),setTimeout(function(){i.contains(o)&&i.removeChild(o)})},"complete"===document.readyState?i.appendChild(o):window.addEventListener("load",function(){i.appendChild(o)}))}catch(a){console.log("error on below is caused by "+u+" "),console.error(a)}var e,n,r,o,i}}))},N.prototype.publishPluginsLogs=function(){var e=N.installedPlugins.find(function(e){return"reportAssetSpeed"===e.name});null!=e&&e.option.collectNotReportedLog(this)},N.prototype.uploadLogs=function(e,t){var n;void 0===e&&(e={}),void 0===t&&(t={}),null!=(n=this.lifeCycle)&&n.emit("uploadLogs",e,t)},N.sessionID="session-"+Date.now(),N.asyncPlugin={},N.urls={aegisCollect:"https://aegis.qq.com/collect",flog:"https://cdn-go.cn/vasdev/web_webpersistance_v2/v1.8.2/flog.core.min.js"},N),as=new L({name:"offlineLog"}),cs=function(e,h){var g=[],y=null,v=null,m=function(e){v=e},b=function(e){g=g.concat(e)},w=function(e,t){y={conds:e=void 0===e?{}:e,params:t=void 0===t?{}:t}};k.useAsyncPlugin(e,{exportsConstructor:"Flog",onAegisInit:function(e){e.lifeCycle.on("beforeWrite",b),e.lifeCycle.on("uploadLogs",w),e.lifeCycle.on("onConfigChange",m)},onAegisInitAndPluginLoaded:function(r,e){var t,n,o,i,u,a,c=h.dbConfig,c=void 0===c?{}:c,s=h.url,s=void 0===s?k.urls.aegisCollect:s,f=h.offlineLogExp,f=void 0===f?3:f,l=h.id,d=h.uin,s=(null!=(t=r.lifeCycle)&&t.remove("beforeWrite",b),null!=(t=r.lifeCycle)&&t.remove("uploadLogs",w),null!=(t=r.lifeCycle)&&t.remove("onConfigChange",m),Object.assign({lookupUrl:s+"/offlineAuto?id="+l,preservedDay:f,id:l,uin:d,aid:(null==(t=r.bean)?void 0:t.aid)||"",beforeRequest:r.config.beforeRequest,afterRequest:r.config.afterRequest},c,{sessionId:k.sessionID}));try{var p=new e(s);g.forEach(function(e){p.add(x(x({},e),{level:e.level===T.INFO_ALL?T.INFO:e.level}))}),null!=(n=r.lifeCycle)&&n.on("beforeWrite",function(e){(e=void 0===e?[]:e).forEach(function(e){p.add(x(x({},e),{level:e.level===T.INFO_ALL?T.INFO:e.level}))})}),null!=(o=r.lifeCycle)&&o.on("uploadLogs",function(e,t){var n;void 0===e&&(e={}),void 0===t&&(t={}),p.uploadLogs(Object.assign({id:h.id,uin:h.uin,aid:null==(n=r.bean)?void 0:n.aid},e),t)}),null!=(i=r.lifeCycle)&&i.on("onConfigChange",function(e){p.setConfig(e)}),null!=(u=r.lifeCycle)&&u.on("destroy",function(){0===as.countInstance()&&(g.length=0,"function"==typeof((y=null)==p?void 0:p.destroy)&&p.destroy())}),p.on("PERREVENT",function(e){r.sendPipeline([function(e,t){n={msg:fu(e),level:T.INFO};var n=(n=Array.isArray(n)?n:[n]).map(function(t,n){return Object.getOwnPropertyNames(t).map(function(e){return Qi(e)+"["+n+"]="+(t[e]===undefined?"":Qi(t[e]))}).join("&")}).join("&")+(n.length?"&count="+n.length:"");t({type:P.OFFLINE,data:n,contentType:"application/x-www-form-urlencoded",method:"post",addBean:!1,url:h.url+"?id=893&sessionId="+k.sessionID+"&uin="+h.uin+"&from="+h.id+"&count=1&version=1.36.6",log:e})}],P.OFFLINE)(e)}),v&&(p.setConfig(v),v=null),y&&(null!=(a=r.lifeCycle)&&a.emit("uploadLogs",y.conds,y.params),y=null),r.flog=p}catch(Z){console.log(Z)}}})},B=as=new L({name:"offlineLog",onNewAegis:function(e){cs(k.urls.flog,e.config)}}),C=(new L({name:"spa"}),new L({name:"spa",init:function(){history.pushState=this.wr("pushState")||history.pushState,history.replaceState=this.wr("replaceState")||history.replaceState,this.sendPv=this.sendPv.bind(this),this.onPageChange()},onPageChange:function(){window.addEventListener("replaceState",this.sendPv),window.addEventListener("pushState",this.sendPv),window.addEventListener("popstate",this.sendPv)},wr:function(n){var r=history[n],e="__"+n+"__hasWrittenByTamSpa";return"function"==typeof r&&!history[e]&&(Object.defineProperty(history,e,{value:!0,enumerable:!1}),function(){var e=r.apply(this,arguments),t=null;return"function"==typeof Event?t=new Event(n):(t=document.createEvent("HTMLEvents")).initEvent(n,!1,!0),window.dispatchEvent(t),e})},sendPv:function(){var t=this;setTimeout(function(){var r=location.href,e=location.pathname;t.$walk(function(n){e&&e!==n.originFireUrl&&(n.sendPipeline([function(e,t){t({url:n.config.pvUrl+"?from="+encodeURIComponent(r),beanFilter:["from"],type:P.PV})}],P.PV)(null),n.originFireUrl=e)})},0)},destroy:function(){window.removeEventListener("replaceState",this.option.sendPv),window.removeEventListener("pushState",this.option.sendPv),window.removeEventListener("popstate",this.option.sendPv)}})),r=(new L({name:"ie"}),new L({name:"ie",init:function(){this.overrideAegisSend(),this.startListen()},startListen:function(){var n=this,r=window.onerror;window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.publishErrorLog({msg:(e[0]||"")+" @ ("+(e[1]||"")+":"+(e[2]||0)+":"+(e[3]||0)+")\n          \n"+fu(e[4]||""),level:T.ERROR}),null!=r&&r.call.apply(r,ii([window],e))}},overrideAegisSend:function(){k.prototype.request=function(e,t,n){var r,o,i=this;e&&"string"==typeof e.url&&""!==e.url&&this.bean.id&&(r=e.url,!1!==e.addBean&&(r=r+(-1===r.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),(o=new Image).onload=function(){i.request(e,t,n),null!=t&&t(null)},o.onerror=function(){i.request(e,t,n),null!=n&&n(null)},e.data?o.src=r+"&"+e.data:o.src=r)}},publishErrorLog:function(t){this.$walk(function(e){e.normalLogPipeline(t)})},destroy:function(){this.option.publishErrorLog=function(){}}})),n=(new L({name:"onClose"}),new L({name:"onClose",onNewAegis:function(){var t,n,e,r,o=this;j.desktop()?(r=window.onunload,window.onunload=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.publishNotReportedLog(),null!=r&&r.call.apply(r,ii([window],e))}):(t=this.publishNotReportedLog.bind(this),n=!0,e=function v(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||(t(e),n&&(removeEventListener("visibilitychange",v,!0),removeEventListener("pagehide",v,!0)))},addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},publishNotReportedLog:function(){var t=this;this.$walk(function(e){e.sendNow=!0,e.publishPluginsLogs(),t.publishThrottlePipeLogs(e)})},publishThrottlePipeLogs:function(e){null!=e&&e.speedLogPipeline([]),null!=e&&e.eventPipeline([]),null!=e&&e.customTimePipeline([]),null!=e&&e.normalLogPipeline([])}})),ss=w.trim,fs=v.parseInt,a=v.Symbol,ls=a&&a.iterator,ds=/^[+-]?0x/i,ps=s(ds.exec),e=8!==fs(y+"08")||22!==fs(y+"0x16")||ls&&!c(function(){fs(Object(ls))})?function(e,t){e=ss(S(e));return fs(e,t>>>0||(ps(ds,e)?16:10))}:fs;function N(e){var t,n,r,o,i,a=Qc.call(this,e)||this;a.sendNow=!1,a.isReportReady=!1,a.reportRequestQueue=[],a.speedLogPipeline=ku([Ru(a),(o=a.config,i={},function(e,t){var n,r;o.speedSample?(r="object"===Eo(o.repeat)?o.repeat:{repeat:o.repeat},n=+r.speed||+r.repeat||5,Array.isArray(e)?(r=e.filter(function(e){var t=!i[e.url]||i[e.url]<n;return i[e.url]=1+~~i[e.url],t})).length&&t(r):(!i[e.url]||i[e.url]<n)&&(i[e.url]=1+~~i[e.url],t(e))):t(e)}),(r=a,function(t,n){es(function(e){r.extendBean("netType",e),n(t)})}),function(e,t){null!=(n=a.lifeCycle)&&n.emit("beforeReportSpeed",e);var n,r=a.config.beforeReportSpeed;if((e="function"==typeof r?e.filter(function(e){return!1!==r(e)}):e).length)return t(e)},function(e){return a.sendPipeline([function(e,t){var n,r,o,i,u;t({type:P.SPEED,url:""+a.config.speedUrl,method:"post",data:(n=e,r=x(x({},a.bean),{from:a.getCurrentPageUrl()}),i={fetch:[],"static":[],bridge:[]},u=new FormData,Array.isArray(n)?n.forEach(function(e){var t=ha(e);i[e.type].push(t)}):(o=ha(n),i[n.type].push(o)),u.append("payload",lu(x({duration:i},r))),u),log:e})}],P.SPEED)(e)}]),e.asyncPlugin=!0;try{"undefined"!=typeof document&&(e.uin=e.uin||(null!=(t=document.cookie.match(/\buin=\D+(\d*)/))?t:[])[1]||(null!=(n=document.cookie.match(/\bilive_uin=\D*(\d+)/))?n:[])[1]||""),a.init(e),a.extendBean("sessionId",N.sessionID),a.extendBean("from",a.getCurrentPageUrl()),"undefined"!=typeof document&&a.extendBean("referer",encodeURIComponent(document.referrer||"")),e.ext1&&a.extendBean("ext1",encodeURIComponent(e.ext1)),e.ext2&&a.extendBean("ext2",encodeURIComponent(e.ext2)),e.ext3&&a.extendBean("ext3",encodeURIComponent(e.ext3))}catch(d){console.warn(d),console.log("%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.\nIt is recommended that you contact us for feedback and thank you for your support.","color: red"),a.sendSDKError(d)}return a}function hs(){this.constructor=Zc}return g({global:!0,forced:parseInt!=e},{parseInt:e}),new L({name:"aid"}),k.use(p),k.use(u),k.use(h),k.use(Aa),k.use(ao),k.use(E),k.use(B),k.use(C),k.use(r),k.use(n),k.use(lo),k});
