(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_wode/PersonalCenter/PersonalCenter"],{"0b90":function(t,e,o){"use strict";(function(t,e){var n=o("4ea4");o("a1a6");n(o("66fd"));var i=n(o("1cd8"));t.__webpack_require_UNI_MP_PLUGIN__=o,e(i.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},"1cd8":function(t,e,o){"use strict";o.r(e);var n=o("ff80"),i=o("dfbb");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("2280");var c=o("f0c5"),l=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"29939eb6",null,!1,n["a"],void 0);e["default"]=l.exports},2280:function(t,e,o){"use strict";var n=o("9d8f"),i=o.n(n);i.a},"436c":function(t,e,o){"use strict";(function(t){var n=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o("9523")),a={data:function(){return{baseurl:getApp().globalData.baseurl,token:getApp().globalData.token,uuid:getApp().globalData.uuid,tuuid:"",UserInfo:[],page:1,momentlist:[],Marksbac:["#FFE2E7","#D8EAFF","#DAFFE6","#E6DAFF"],showApp:!1}},onLoad:function(t){this.tuuid=t.uuid},mounted:function(){console.log("getIsToken"),this.getIsToken()},onReachBottom:function(){this.getmomentlist()},methods:{getIsToken:function(){var e=this;t.request({url:this.baseurl+"/api/IosVisitor/checkToken",method:"POST",data:{token:this.token,city:t.getStorageSync("citySel")},header:{xcx:1,token:this.token},success:function(o){var n=o.data;0==n.code&&(getApp().globalData.token=null,e.token=null,t.removeStorageSync("token")),e.getUserInfo(),e.getmomentlist()},fail:function(){},complete:function(){}})},hideview:function(){},showLoadApp:function(){this.showApp=!this.showApp},guanzhuClick:function(){var e=this,o=t.getStorageSync("token");if(!o)return t.showToast({title:"请先登录",icon:"none"}),void setTimeout((function(e){t.reLaunch({url:"/pages/Login/Login"})}),1e3);var n=t.getStorageSync("loginInfo");if(n&&0==n.status)return t.showToast({title:"请先完善信息",icon:"none"}),setTimeout((function(e){t.navigateTo({url:"/pages_yindao/yindao1/yindao1"})}),1e3),!1;t.request({url:this.baseurl+"/api/user/follow",method:"POST",data:{uuid:this.tuuid,city:t.getStorageSync("citySel")},header:{xcx:1,token:this.token},success:function(o){t.showToast({title:"关注成功",icon:"none"}),e.UserInfo.is_follow=1},fail:function(){},complete:function(){}})},showApp:function(){t.showToast({title:"完整功能请下载APP",icon:"none"})},getUserInfo:function(){var e=this,o=t.getStorageSync("token"),n=this.baseurl+"/api/user/getUserInfo";o||(n=this.baseurl+"/api/IosVisitor/getUserInfo"),t.request({url:n,method:"POST",data:{uuid:this.tuuid,city:t.getStorageSync("citySel")},header:{xcx:1,token:this.token},success:function(o){console.log("个人信息",o),e.UserInfo=o.data.data,t.setNavigationBarTitle({title:e.UserInfo.nickname})},fail:function(){},complete:function(){}})},getmomentlist:function(){var e=this,o=t.getStorageSync("token"),n=this.baseurl+"/api/moments/momentsList";o||(n=this.baseurl+"/api/iosVisitor/momentsList"),t.request({url:n,method:"POST",data:{page:this.page++,num:100,tuuid:this.tuuid,video:1,city:t.getStorageSync("citySel")},header:{xcx:1,token:this.token},success:function(t){if(t.data.data.length>0){for(var o=t.data.data,n=0;n<o.length;n++)o[n].photo=o[n].photo.map((function(t){return JSON.parse(t)}));e.momentlist=e.momentlist.concat(o);for(var i=e.momentlist,a=0;a<i.length;a++)i[a].video_xcx.length>0&&(i[a].video_xcx[0].width<i[a].video_xcx[0].height?(i[a].video_xcx[0].width_b=300,i[a].video_xcx[0].height_b=300/i[a].video_xcx[0].width*i[a].video_xcx[0].height):(i[a].video_xcx[0].width_b=600,i[a].video_xcx[0].height_b=600/i[a].video_xcx[0].width*i[a].video_xcx[0].height));e.momentlist=i}else e.page-=1;console.log(t)},fail:function(){},complete:function(){}})},previewImage:function(e,o,n){console.log(e,o,n);var i=[];e.forEach((function(t){return i.push(t.imgUrl)})),console.log(i),t.previewImage({current:n,urls:i,success:function(t){console.log(t)}})},follow:function(e,o){var n=this;t.request({url:this.baseurl+"/api/user/follow",method:"POST",header:{xcx:1,token:this.token},data:{uuid:e,city:t.getStorageSync("citySel")},success:function(t){if(console.log("关注",t),1==t.data.data){console.log("关注成功"),n.momentlist[o].is_follow=1,console.log(n.momentlist);n.momentlist.filter((function(t,o){console.log(t.uuid==e,o),t.uuid==e&&(n.momentlist[o].is_follow=1)}))}else console.log("取消关注成功"),n.momentlist.filter((function(t,o){console.log(t.uuid==e,o),t.uuid==e&&(n.momentlist[o].is_follow=0)}))},fail:function(){},complete:function(){}})},MomentLike:function(e,o,n){var a,c=this;if(1==n)t.request({url:this.baseurl+"/api/moments/momentsLike",method:"POST",header:(a={xcx:1},(0,i.default)(a,"xcx",1),(0,i.default)(a,"token",this.token),a),data:{moments_no:e,city:t.getStorageSync("citySel")},success:function(t){console.log("喜欢",t.data.data),1==t.data.data?(c.momentlist[o].is_like=1,c.momentlist[o].like_num+=1):0==t.data.data&&(c.momentlist[o].is_like=0,c.momentlist[o].like_num-=1)},fail:function(){},complete:function(){}});else if(2==n){var l;t.request({url:this.baseurl+"/api/moments/momentsLike",method:"POST",header:(l={xcx:1},(0,i.default)(l,"xcx",1),(0,i.default)(l,"token",this.token),l),data:(0,i.default)({moments_no:e,city:t.getStorageSync("citySel")},"city",t.getStorageSync("citySel")),success:function(t){console.log("喜欢",t.data.data),1==t.data.data?(c.momentlist[o].is_like=1,c.momentlist[o].like_num+=1):0==t.data.data&&(c.momentlist[o].is_like=0,c.momentlist[o].like_num-=1)},fail:function(){},complete:function(){}})}},Delect:function(e,o){var n=this;t.showModal({title:"删除圈子",content:"确定删除该条圈子吗?",showCancel:!0,success:function(i){console.log(i),i.confirm&&t.request({url:n.baseurl+"/api/moments/momentsDel",method:"POST",data:{moments_no:e},header:{token:n.token},success:function(e){t.showToast({title:e.data.info,mask:!0,icon:"none"}),n.momentlist.splice(o,1)},fail:function(){},complete:function(){}})},fail:function(){},complete:function(){}})},NavFollow:function(){t.navigateTo({url:"../../pages_wode/follow/follow",success:function(t){},fail:function(){},complete:function(){}})},NavFans:function(){t.navigateTo({url:"../../pages_wode/Fans/Fans",success:function(t){},fail:function(){},complete:function(){}})},NavActivity:function(){var e=JSON.stringify(this.UserInfo);t.navigateTo({url:"../../pages_wode/Activity/Activity?UserInfo=".concat(e),success:function(t){},fail:function(){},complete:function(){}})},navDetail:function(e){t.navigateTo({url:"../../pages_quanzi/criclleDetal/criclleDetal?moments_no=".concat(e),success:function(t){},fail:function(){},complete:function(){}}),console.log(11)}}};e.default=a}).call(this,o("543d")["default"])},"9d8f":function(t,e,o){},dfbb:function(t,e,o){"use strict";o.r(e);var n=o("436c"),i=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},ff80:function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}));var n={loadApp:function(){return o.e("components/loadApp/loadApp").then(o.bind(null,"8d77"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.momentlist,(function(e,o){var n=t.__get_orig(e),i=2!=e.type?t.__map(e.photo,(function(o,n){var i=t.__get_orig(o),a=e.photo.length;return{$orig:i,g0:a}})):null,a=2!=e.type?t.__map(e.photo,(function(o,n){var i=t.__get_orig(o),a=e.photo.length;return{$orig:i,g1:a}})):null,c=2!=e.type?t.__map(e.photo,(function(o,n){var i=t.__get_orig(o),a=e.photo.length>1&&e.photo.length<4;return{$orig:i,g2:a}})):null,l=2!=e.type?t.__map(e.photo,(function(o,n){var i=t.__get_orig(o),a=1==e.photo.length&&o.width>o.height&&o.width>250;return{$orig:i,g3:a}})):null,s=2!=e.type?t.__map(e.photo,(function(o,n){var i=t.__get_orig(o),a=1==e.photo.length&&o.width<o.height&&o.height>300;return{$orig:i,g4:a}})):null,u=2!=e.type?t.__map(e.photo,(function(o,n){var i=t.__get_orig(o),a=1==e.photo.length&&o.width==o.height;return{$orig:i,g5:a}})):null;return{$orig:n,l0:i,l1:a,l2:c,l3:l,l4:s,l5:u}})));t._isMounted||(t.e0=function(e){t.Show=!0}),t.$mp.data=Object.assign({},{$root:{l6:o}})},a=[]}},[["0b90","common/runtime","common/vendor"]]]);