(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_quanzi/release/release"],{3931:function(e,t,i){"use strict";(function(e,t){var s=i("4ea4");i("a1a6");s(i("66fd"));var n=s(i("b20c"));e.__webpack_require_UNI_MP_PLUGIN__=i,t(n.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},"47ea":function(e,t,i){"use strict";(function(e){var s=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i("2eee")),o=s(i("c973")),l=s(i("3847")),a=s(i("d32e")),c={data:function(){return{baseurl:getApp().globalData.baseurl,token:getApp().globalData.token,fileList6:[],tptrue:!1,MarksValue:"",TrueMarks:!1,tempurl:"",Pushlist:[],addlist:"",biaoqianlist:[],wzlist:[],value1:"",count:4,value:2,osslist:[],videoIs:!1}},onLoad:function(){this.myAmapFun=new a.default.AMapWX({key:getApp().globalData.key})},mounted:function(){var e=this;e.myAmapFun.getPoiAround({success:function(t){console.log(t),e.wzlist=t.markers},fail:function(e){console.log(e)}}),this.Marks()},methods:{isVideoJudge:function(){var e=this.fileList6;e.length>0?e[0].imgUrl.indexOf("mp4")>=0&&(this.videoIs=!0):this.videoIs=!1},onfabu:function(){var t=this;if(""!=this.value1&&this.fileList6.length>0)for(var i=function(){e.showLoading({mask:!0});var i=t.fileList6[s].imgUrl;console.log("结果====",i),(0,l.default)(t.fileList6[s].imgUrl,"image/xcx/",(function(s){if(s.indexOf("mp4")<0)console.log("上传图片结果",s),e.getImageInfo({src:i,success:function(i){var n=t;if(n.fileList6.length<9){var o={width:i.width,height:i.height,imgUrl:s};n.osslist.push(JSON.stringify(o)),console.log("图片信息对象",n.osslist),""!=t.value1&&n.osslist.length==n.fileList6.length&&(console.log(111),e.request({url:t.baseurl+"/api/moments/momentsShare",method:"POST",data:{text:t.value1,photo:t.osslist,marks:t.Pushlist,address:t.addlist,city:e.getStorageSync("citySel")},header:{xcx:1,token:t.token},success:function(t){console.log("图片文字都不能为空",t),e.reLaunch({url:"../../pages/circle/circle"})},fail:function(){},complete:function(){}}))}},complete:function(e){console.log("结尾",e)}});else{var n=t.fileList6[0];n.video_img="",n.imgUrl=s,n.type="2",e.request({url:t.baseurl+"/api/moments/momentsShare",method:"POST",data:{text:t.value1,marks:t.Pushlist,address:t.addlist,video:JSON.stringify(n),type:"2",city:e.getStorageSync("citySel")},header:{xcx:1,token:t.token},success:function(t){console.log("图片文字都不能为空",t),e.reLaunch({url:"../../pages/circle/circle"})},fail:function(){},complete:function(){}})}e.hideLoading()}))},s=0;s<this.fileList6.length;s++)i();else if(""!=this.value1&&0==this.fileList6.length)e.request({url:this.baseurl+"/api/moments/momentsShare",method:"POST",data:{text:this.value1,photo:[],marks:this.Pushlist,address:this.addlist,city:e.getStorageSync("citySel")},header:{xcx:1,token:this.token},success:function(t){console.log("图片文字都不能为空",t),e.reLaunch({url:"../../pages/circle/circle"})},fail:function(){},complete:function(){}});else if(""==this.value1&&this.fileList6.length>0){var n=function(){e.showLoading({mask:!0});var i=t.fileList6[s].imgUrl;(0,l.default)(t.fileList6[s].imgUrl,"image/xcx/",(function(s){if(console.log(i,"临时路径"),console.log("结果",s),console.log("结果1",s.indexOf("mp4")),s.indexOf("mp4")<0)e.getImageInfo({src:i,success:function(i){console.log(i);var n=t;if(n.fileList6.length<9){var o={width:i.width,height:i.height,imgUrl:s};n.osslist.push(JSON.stringify(o)),console.log("图片信息对象",n.osslist),""==t.value1&&t.osslist.length!=t.fileList6.length||(console.log(111),e.request({url:t.baseurl+"/api/moments/momentsShare",method:"POST",data:{text:t.value1,photo:t.osslist,marks:t.Pushlist,address:t.addlist,city:e.getStorageSync("citySel")},header:{xcx:1,token:t.token},success:function(t){console.log("图片文字都不能为空",t),e.reLaunch({url:"../../pages/circle/circle"})},fail:function(){},complete:function(){}}))}}});else{var n=t.fileList6[0];n.video_img="",n.imgUrl=s,n.type="2",e.request({url:t.baseurl+"/api/moments/momentsShare",method:"POST",data:{text:t.value1,marks:t.Pushlist,address:t.addlist,video:JSON.stringify(n),type:"2",city:e.getStorageSync("citySel")},header:{xcx:1,token:t.token},success:function(t){console.log("图片文字都不能为空",t),e.reLaunch({url:"../../pages/circle/circle"})},fail:function(){},complete:function(){}})}e.hideLoading()}))};for(s=0;s<this.fileList6.length;s++)n()}else""==this.value1&&0==this.fileList6.length&&(console.log("内容都为空"),e.showToast({title:"请编辑圈子内容！",icon:"none"}))},detail:function(e){this.fileList6.splice(e,1),this.isVideoJudge()},uploadsSel:function(){var t=this;0==this.fileList6.length?e.showActionSheet({itemList:["照片","视频"],success:function(e){0==e.tapIndex?t.uploads():t.uploadVideo()},fail:function(e){console.log(e.errMsg)}}):this.uploads()},uploadVideo:function(){var t=this;e.chooseVideo({sourceType:["camera","album"],success:function(e){if(console.log("res.tempFilePath;",e),e){var i={width:e.width,height:e.height,imgUrl:e.tempFilePath,imgVideo:e.thumbTempFilePath};t.fileList6.push(i),console.log("选择的视频",t.fileList6),t.isVideoJudge()}}})},uploads:function(){var t=this;e.chooseImage({count:9-this.fileList6,success:function(i){for(var s=0;s<i.tempFilePaths.length;s++)e.getImageInfo({src:i.tempFilePaths[s],success:function(e){if(t.fileList6.length<9){var i={width:e.width,height:e.height,imgUrl:e.path};t.fileList6.push(i)}t.isVideoJudge()}})}})},deletePic:function(e){this["fileList".concat(e.name)].splice(e.index,1)},afterRead:function(e){var t=this;return(0,o.default)(n.default.mark((function i(){return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:console.log("图片",e),t.fileList6.push(e.file[0].url);case 2:case"end":return i.stop()}}),i)})))()},HuatiPush:function(e){if(this.Pushlist.includes(e)){var t=this.Pushlist.indexOf(e);this.Pushlist.splice(t,1),console.log(this.Pushlist)}else this.Pushlist.push(e)},AddPush:function(e){this.addlist=e},Marks:function(){var t=this;e.request({url:this.baseurl+"/api/moments/momentsMarks",method:"POST",header:{xcx:1,token:this.token},data:{city:e.getStorageSync("citySel")},success:function(e){console.log("话题",e),t.biaoqianlist=e.data.data},fail:function(){},complete:function(){}})},onBtnMarks:function(){var e={name:"#"+this.MarksValue};this.biaoqianlist.unshift(e),this.Pushlist.push("#"+this.MarksValue),this.TrueMarks=!1,console.log(this.biaoqianlist,this.TrueMarks)}}};t.default=c}).call(this,i("543d")["default"])},5240:function(e,t,i){},"530d":function(e,t,i){"use strict";var s=i("5240"),n=i.n(s);n.a},"6e1f":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){}));var s=function(){var e=this,t=e.$createElement,i=(e._self._c,e.videoIs?e.fileList6.length:null),s=e.videoIs?null:e.fileList6.length,n=e.__map(e.biaoqianlist,(function(t,i){var s=e.__get_orig(t),n=e.Pushlist.includes(t.name);return{$orig:s,g2:n}})),o=e.fileList6.length>0||e.value1.length>0;e._isMounted||(e.e0=function(t){e.TrueMarks=!0},e.e1=function(t){t.stopPropagation(),e.TrueMarks=!1},e.e2=function(t){t.stopPropagation(),e.TrueMarks=!0}),e.$mp.data=Object.assign({},{$root:{g0:i,g1:s,l0:n,g3:o}})},n=[]},b20c:function(e,t,i){"use strict";i.r(t);var s=i("6e1f"),n=i("d82d");for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("530d");var l=i("f0c5"),a=Object(l["a"])(n["default"],s["b"],s["c"],!1,null,"6ae3d482",null,!1,s["a"],void 0);t["default"]=a.exports},d82d:function(e,t,i){"use strict";i.r(t);var s=i("47ea"),n=i.n(s);for(var o in s)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(o);t["default"]=n.a}},[["3931","common/runtime","common/vendor"]]]);