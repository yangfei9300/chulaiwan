(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_huodong/pay/pay"],{1408:function(t,e,n){"use strict";var a=n("edc0"),o=n.n(a);o.a},"3f76":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var a=function(){var t=this.$createElement;this._self._c},o=[]},4073:function(t,e,n){"use strict";n.r(e);var a=n("3f76"),o=n("48ba");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("1408");var c=n("f0c5"),s=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,"054c0324",null,!1,a["a"],void 0);e["default"]=s.exports},"415c":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{baseurl:getApp().globalData.baseurl,token:getApp().globalData.token,lat:getApp().globalData.lat,lng:getApp().globalData.lng,act_no:"",distance:0,list:[],Detail:"",openid:"oWwzJ4iTZojS9CfhGwZkh1_5YdHU"}},onLoad:function(e){var n=this;console.log(e.act_no),this.act_no=e.act_no,t.login({success:function(t){console.log(t),n.code=t.code,n.getOpenid(n.code)}})},onShow:function(){this.getDetail()},methods:{getOpenid:function(e){var n=this;t.request({url:this.baseurl+"/api/login/getOpenid",method:"POST",header:{xcx:1,token:this.token},data:{code:e,city:t.getStorageSync("citySel")},success:function(t){console.log("openid",t),n.openid=t.data.openid},fail:function(){},complete:function(){}})},getDetail:function(){var e=this;t.request({url:this.baseurl+"/api/act/actInfo",method:"POST",header:{xcx:1,token:this.token},data:{act_no:this.act_no,city:t.getStorageSync("citySel")},success:function(t){e.list=t.data.data},fail:function(){},complete:function(){}})},gopay:function(){this.Detail?this.openid?t.request({url:this.baseurl+"/api/actDo/prepay",method:"POST",header:{xcx:1,token:this.token},data:{act_no:this.act_no,pay_type:3,city:t.getStorageSync("citySel"),remark:this.Detail,ticket:1,openid:this.openid},success:function(e){1==e.data.code?t.requestPayment({provider:"wxpay",timeStamp:e.data.data.timeStamp,nonceStr:e.data.data.nonceStr,package:e.data.data.package,signType:e.data.data.signType,paySign:e.data.data.paySign,success:function(e){t.showToast({title:"支付成功",icon:"none",success:function(){t.navigateBack({delta:1})}}),console.log("success:"+JSON.stringify(e))},fail:function(e){console.log(e),t.showToast({title:"支付失败",icon:"none"}),console.log("fail:"+JSON.stringify(e))}}):t.showToast({title:e.data.info,icon:"none"})},fail:function(){},complete:function(){}}):t.showToast({title:"支付错误",mask:!0,icon:"none"}):t.showToast({title:"请添加备注",mask:!0,icon:"none"})}}};e.default=n}).call(this,n("543d")["default"])},"48ba":function(t,e,n){"use strict";n.r(e);var a=n("415c"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},"6fb0":function(t,e,n){"use strict";(function(t,e){var a=n("4ea4");n("a1a6");a(n("66fd"));var o=a(n("4073"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},edc0:function(t,e,n){}},[["6fb0","common/runtime","common/vendor"]]]);