(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Login/Login"],{"0eab":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var o=function(){var t=this.$createElement;this._self._c},a=[]},"347d":function(t,e,n){"use strict";var o=n("775e"),a=n.n(o);a.a},"3d01":function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("a1a6");o(n("66fd"));var a=o(n("9285"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"775e":function(t,e,n){},"805a":function(t,e,n){"use strict";n.r(e);var o=n("9da8"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},9285:function(t,e,n){"use strict";n.r(e);var o=n("0eab"),a=n("805a");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("347d");var c=n("f0c5"),u=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,"b17f023e",null,!1,o["a"],void 0);e["default"]=u.exports},"9da8":function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("d32e")),i={data:function(){return{baseurl:getApp().globalData.baseurl,codeshow:!0,code:"",phone:"",count:"",timer:null,lat:"",lnt:"",isread:!1}},mounted:function(){this.getlocation()},methods:{getphone:function(e){var n=this,o={code:"",xcx:1,encryptedData:e.detail.encryptedData,iv:e.detail.iv};t.login({success:function(t){console.log("从大打算",t),o.code=t.code,n.getWxPhone(o)}})},getWxPhone:function(e){var n=this;e.city=t.getStorageSync("citySel"),t.request({url:this.baseurl+"/api/login/getPhone",method:"POST",data:e,header:{xcx:1,token:this.token},success:function(e){1==e.data.code?n.loginResult(e):t.showToast({icon:"error",title:e.data.info,duration:2e3})},fail:function(){},complete:function(){}})},isreadCLick:function(){this.isread=!this.isread},toXIeyi:function(e){t.navigateTo({url:"/pages_wode/xieyi/xieyi?type="+e})},getcode:function(e){var n=this;console.log(this.baseurl);11==e.length?t.request({url:this.baseurl+"/api/sms/send_code",method:"POST",data:{phone:this.phone,code_type:0,city:t.getStorageSync("citySel")},success:function(e){console.log(e),0==e.data.code?t.showToast({title:e.data.info,icon:"error",duration:2e3}):1==e.data.code&&(n.timer||(n.count=60,n.codeshow=!1,n.timer=setInterval((function(){n.count>0&&n.count<=60?n.count--:(n.codeshow=!0,clearInterval(n.timer),n.timer=null)}),1e3)))},fail:function(){},complete:function(){}}):t.showToast({title:"请检查手机号",icon:"error",duration:2e3})},onLogin:function(e,n){var o=this;11==e.length&&n.length>0&&t.request({url:this.baseurl+"/api/login/login",method:"POST",data:{type:"phone",phone:e,code:n,xcx:1,openid1:t.getStorageSync("openid"),city:t.getStorageSync("citySel")},success:function(t){o.onLogin1(e,n)},fail:function(){},complete:function(){}})},onLogin1:function(e,n){var o=this;11==e.length&&n.length>0&&t.request({url:this.baseurl+"/api/login/login",method:"POST",data:{type:"phone",phone:e,code:n,xcx:1,openid1:t.getStorageSync("openid"),city:t.getStorageSync("citySel")},success:function(e){console.log(e),1==e.data.code?o.loginResult(e):t.showToast({icon:"error",title:e.data.info,duration:2e3})},fail:function(){},complete:function(){}})},loginResult:function(e){getApp().globalData.token=e.data.data.token,getApp().globalData.uuid=e.data.data.uuid,t.setStorageSync("token",e.data.data.token),t.setStorageSync("uuid",e.data.data.uuid),t.setStorageSync("loginInfo",e.data.data),console.log("dayin diah",e.data),1==e.data.data.status?(console.log("已注册1",e.data.data),t.reLaunch({url:"/pages/index/index"})):0==e.data.data.status&&(console.log("未注册0"),t.navigateTo({url:"../../pages_yindao/yindao1/yindao1",success:function(t){},fail:function(){},complete:function(){}}))},getlocation:function(){var e=new a.default.AMapWX({key:"bf84d9693654c4dbc667a2c462ebdca4"});console.log(e),e.getRegeo({success:function(e){console.log(e),getApp().globalData.lat=e[0].latitude,getApp().globalData.lng=e[0].longitude,t.setStorage({key:"lat",data:e[0].latitude,success:function(){}}),t.setStorage({key:"lng",data:e[0].longitude,success:function(){}})},fail:function(t){console.log(t)}})}}};e.default=i}).call(this,n("543d")["default"])}},[["3d01","common/runtime","common/vendor"]]]);